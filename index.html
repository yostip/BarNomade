<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Bar Nomade">
  <meta name="theme-color" content="#39ff14">
  <meta name="description" content="Gestion des fûts pour les bars nomades du Hellfest 2026">
  <title>Gestion Fûts - Hellfest 2026</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  
  <!-- Preconnect pour accélérer les connexions CDN -->
  <link rel="preconnect" href="https://unpkg.com">
  <link rel="preconnect" href="https://cdn.tailwindcss.com">
  <link rel="preconnect" href="https://www.gstatic.com">
  
  <style>
    * { -webkit-tap-highlight-color: transparent; }
    body { overscroll-behavior: none; background: #000; }
    @media (display-mode: standalone) {
      body { padding-top: env(safe-area-inset-top); }
    }
    /* Écran de chargement - simplifié */
    #loading-screen {
      position: fixed;
      inset: 0;
      background: #000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      color: #39ff14;
    }
    #loading-screen.hidden { display: none; }
    .loader-logo {
      width: 80px;
      height: 80px;
    }
  </style>
  
  <!-- Scripts critiques (chargement immédiat) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <!-- Babel supprimé - JS précompilé -->
  
  <!-- Firebase (critique) -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
  
  <!-- Scripts lourds chargés à la demande -->
  <script>
    window.loadJsPDF = () => !window.jspdf && new Promise(r => { const s = document.createElement('script'); s.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js'; s.onload = r; document.head.appendChild(s); });
    window.loadXLSX = () => !window.XLSX && new Promise(r => { const s = document.createElement('script'); s.src = 'https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js'; s.onload = r; document.head.appendChild(s); });
    window.loadChartJS = () => !window.Chart && new Promise(r => { const s = document.createElement('script'); s.src = 'https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js'; s.onload = r; document.head.appendChild(s); });
  </script>
</head>
<body class="bg-black">
  <!-- Écran de chargement affiché immédiatement -->
  <div id="loading-screen">
    <img src="logo-hellfest.png" alt="Hellfest" class="loader-logo">
    <p style="margin-top: 20px; font-size: 18px;">Chargement...</p>
    <p style="margin-top: 8px; font-size: 12px; color: #39ff14; font-weight: bold;">HELLFEST 2026</p>
  </div>
  
  <div id="root"></div>
  
  <script>
(()=>{const{useState:m,useEffect:Y,useCallback:on,useRef:Hs}=React,Ka=()=>{const p=document.getElementById("loading-screen");p&&p.classList.add("hidden")},Qa={apiKey:"AIzaSyCgl30syyCEJif9q96E2jzv-aTXxXgvgv0",authDomain:"gestion-futs-hellfest.firebaseapp.com",databaseURL:"https://gestion-futs-hellfest-default-rtdb.europe-west1.firebasedatabase.app",projectId:"gestion-futs-hellfest",storageBucket:"gestion-futs-hellfest.firebasestorage.app",messagingSenderId:"107509834680",appId:"1:107509834680:web:3a58295d3268b5d19f654d"},dn=firebase.initializeApp(Qa),v=firebase.database(),bt=(p,M)=>M==="super_admin"?p==="HF2026Admin":p==="Hellfest26",Wa=({onJoinSession:p})=>{const[M,k]=m("choice"),[be,ne]=m(""),[Z,qe]=m(""),[_e,c]=m(""),[he,w]=m(!1),[O,ce]=m(null),[Je,F]=m(!0),[Me,P]=m(!1),[ke,ft]=m(""),[Ue,d]=m(!1),[fe,D]=m([]),[gt,ee]=m(!1),[Ae,T]=m("");React.useEffect(()=>{const R=new URLSearchParams(window.location.search).get("session");R&&(ne(R.toUpperCase()),k("join"),window.history.replaceState({},document.title,window.location.pathname))},[]),React.useEffect(()=>{const $=localStorage.getItem("gestionFuts_session"),R=localStorage.getItem("gestionFuts_userName"),V=localStorage.getItem("gestionFuts_isAdmin"),z=localStorage.getItem("gestionFuts_isCreator");$&&R?v.ref(`sessions/${$}`).once("value",j=>{j.exists()?ce({code:$,userName:R,isAdmin:V==="true",isCreator:z==="true"}):(localStorage.removeItem("gestionFuts_session"),localStorage.removeItem("gestionFuts_userName"),localStorage.removeItem("gestionFuts_isAdmin"),localStorage.removeItem("gestionFuts_isCreator")),F(!1)}):F(!1)},[]);const ge=async()=>{O&&(w(!0),await v.ref(`sessions/${O.code}/users/${O.userName}`).update({lastActive:Date.now()}),p(O.code,O.userName,O.isCreator))},_=()=>{localStorage.removeItem("gestionFuts_session"),localStorage.removeItem("gestionFuts_userName"),localStorage.removeItem("gestionFuts_isAdmin"),localStorage.removeItem("gestionFuts_isCreator"),ce(null)},Ee=async()=>{ee(!0);const R=(await v.ref("sessions").once("value")).val()||{},V=Object.entries(R).map(([z,j])=>{var ye;return{code:z,createdAt:((ye=j.config)==null?void 0:ye.createdAt)||0,nombreBars:j.bars?Object.keys(j.bars).length:0,nombreUsers:j.users?Object.keys(j.users).length:0,historiqueCount:j.historique?Object.keys(j.historique).length:0,ventesCount:j.historiqueVentes?Object.keys(j.historiqueVentes).length:0}});V.sort((z,j)=>j.createdAt-z.createdAt),D(V),ee(!1)},vt=async $=>{confirm(`Supprimer d\xE9finitivement la session ${$} ?

Toutes les donn\xE9es seront perdues (RGPD).`)&&(await v.ref(`sessions/${$}`).remove(),D(R=>R.filter(V=>V.code!==$)))},Re=async()=>{confirm(`\u26A0\uFE0F ATTENTION \u26A0\uFE0F

Supprimer TOUTES les ${fe.length} sessions ?

Cette action est IRR\xC9VERSIBLE !`)&&confirm(`Derni\xE8re confirmation :
Voulez-vous vraiment supprimer toutes les donn\xE9es ?`)&&(await v.ref("sessions").remove(),D([]))},Te=()=>{bt(ke,"super_admin")?(d(!0),Ee()):alert("Mot de passe incorrect")},He=()=>{const $="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let R="HF26-";for(let V=0;V<4;V++)R+=$.charAt(Math.floor(Math.random()*$.length));return R},ze=async()=>{if(!Z.trim()){c("Entre ton pr\xE9nom");return}if(!bt(Ae,"super_admin")){c("Mot de passe incorrect. Seul un administrateur peut cr\xE9er une session.");return}w(!0),c("");const R=He(),V=v.ref(`sessions/${R}`),z={config:{stockInitialBiere:50,stockInitialCidre:20,maxFutsParBar:3,nombreJours:4,createdAt:Date.now(),createdBy:Z.trim()},creneaux:[{id:"c1",label:"11h30-13h"},{id:"c2",label:"13h-15h"},{id:"c3",label:"15h-18h"},{id:"c4",label:"18h-22h30"},{id:"c5",label:"22h30-00h30"}],jourActuel:1,users:{[Z.trim()]:{joinedAt:Date.now(),lastActive:Date.now()}}};await V.set(z),p(R,Z.trim(),!0)},Ge=async()=>{if(!Z.trim()){c("Entre ton pr\xE9nom");return}if(!be.trim()){c("Entre le code de session");return}w(!0),c("");const $=be.trim().toUpperCase(),R=v.ref(`sessions/${$}`);if(!(await R.once("value")).exists()){c("Session introuvable"),w(!1);return}await R.child(`users/${Z.trim()}`).set({joinedAt:Date.now(),lastActive:Date.now()}),p($,Z.trim())};return M==="choice"?React.createElement("div",{className:"min-h-screen bg-black flex items-center justify-center p-4"},React.createElement("div",{className:"w-full max-w-sm"},React.createElement("div",{className:"text-center mb-8"},React.createElement("img",{src:"logo-hellfest.png",alt:"Hellfest",className:"w-24 h-24 mx-auto mb-4"}),React.createElement("h1",{className:"text-2xl font-bold text-white mb-2"},"Gestion F\xFBts"),React.createElement("p",{className:"text-green-400 font-bold"},"HELLFEST 2026")),Je?React.createElement("div",{className:"mb-6 p-4 bg-neutral-800 rounded-xl text-center"},React.createElement("p",{className:"text-neutral-400"},"Chargement...")):O&&React.createElement("div",{className:"mb-6 p-4 bg-green-900/30 border border-green-700 rounded-xl"},React.createElement("div",{className:"flex items-center justify-between mb-3"},React.createElement("span",{className:"text-green-400 font-bold"},"\u{1F4C2} Session r\xE9cente"),React.createElement("button",{onClick:_,className:"text-xs text-neutral-500 hover:text-red-400",title:"Oublier cette session"},"\u2715")),React.createElement("div",{className:"mb-3"},React.createElement("p",{className:"text-white font-mono text-lg"},O.code),React.createElement("p",{className:"text-sm text-neutral-400"},"Connect\xE9 en tant que ",React.createElement("span",{className:"text-green-300"},O.userName),O.isCreator&&React.createElement("span",{className:"ml-2 text-xs bg-red-800 px-2 py-0.5 rounded"},"Cr\xE9ateur"),O.isAdmin&&!O.isCreator&&React.createElement("span",{className:"ml-2 text-xs bg-green-800 px-2 py-0.5 rounded"},"Admin"))),React.createElement("button",{onClick:ge,disabled:he,className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white rounded-lg font-bold transition-colors disabled:opacity-50"},he?"\u23F3 Connexion...":"\u{1F504} Reprendre cette session")),React.createElement("div",{className:"space-y-4"},React.createElement("button",{onClick:()=>k("create"),className:"w-full py-4 bg-red-600 text-white rounded-xl font-bold text-lg hover:bg-red-700 transition-colors"},"\u{1F195} Cr\xE9er une session"),React.createElement("button",{onClick:()=>k("join"),className:"w-full py-4 bg-neutral-800 text-white rounded-xl font-bold text-lg hover:bg-neutral-700 transition-colors border border-neutral-700"},"\u{1F517} Rejoindre une session")),React.createElement("button",{onClick:()=>P(!0),className:"mt-8 text-neutral-600 text-xs hover:text-neutral-400 transition-colors"},"\u{1F510} Administration")),Me&&React.createElement("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-neutral-900 rounded-2xl w-full max-w-lg p-6 max-h-[90vh] overflow-y-auto border border-neutral-700"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h3",{className:"text-xl font-bold text-red-400"},"\u{1F510} Super Admin"),React.createElement("button",{onClick:()=>{P(!1),d(!1),ft("")},className:"text-neutral-400 hover:text-white"},"\u2715")),Ue?React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("p",{className:"text-green-400 text-sm"},"\u2713 Authentifi\xE9"),React.createElement("button",{onClick:Ee,className:"text-xs text-neutral-400 hover:text-white"},"\u{1F504} Actualiser")),React.createElement("div",{className:"bg-yellow-900/30 border border-yellow-700 rounded-lg p-3"},React.createElement("p",{className:"text-yellow-400 text-sm"},"\u26A0\uFE0F RGPD : La suppression est d\xE9finitive et irr\xE9versible.")),gt?React.createElement("p",{className:"text-center text-neutral-400 py-4"},"Chargement..."):fe.length===0?React.createElement("p",{className:"text-center text-neutral-500 py-4"},"Aucune session trouv\xE9e"):React.createElement("div",{className:"space-y-2 max-h-64 overflow-y-auto"},fe.map($=>React.createElement("div",{key:$.code,className:"bg-neutral-800 rounded-lg p-3 flex items-center justify-between"},React.createElement("div",null,React.createElement("p",{className:"font-mono font-bold text-white"},$.code),React.createElement("p",{className:"text-xs text-neutral-400"},$.createdAt?new Date($.createdAt).toLocaleDateString("fr-FR"):"Date inconnue"," \u2022 ",$.nombreUsers," user(s) \u2022 ",$.historiqueCount+$.ventesCount," enregistrements")),React.createElement("button",{onClick:()=>vt($.code),className:"px-3 py-1 bg-red-600 hover:bg-red-500 rounded text-sm"},"\u{1F5D1}\uFE0F")))),fe.length>0&&React.createElement("button",{onClick:Re,className:"w-full py-3 bg-red-900 hover:bg-red-800 rounded-lg font-medium border border-red-600 mt-4"},"\u{1F5D1}\uFE0F Supprimer TOUTES les sessions (",fe.length,")")):React.createElement("div",{className:"space-y-4"},React.createElement("p",{className:"text-neutral-400 text-sm"},"Acc\xE8s r\xE9serv\xE9 \xE0 l'administrateur principal."),React.createElement("div",null,React.createElement("label",{className:"block text-sm text-neutral-400 mb-1"},"Mot de passe Super Admin"),React.createElement("input",{type:"password",value:ke,onChange:$=>ft($.target.value),className:"w-full px-4 py-3 bg-neutral-800 rounded-lg",placeholder:"Mot de passe...",onKeyPress:$=>$.key==="Enter"&&Te()})),React.createElement("button",{onClick:Te,className:"w-full py-3 bg-red-600 rounded-lg font-medium"},"Acc\xE9der"))))):React.createElement("div",{className:"min-h-screen bg-black flex items-center justify-center p-4"},React.createElement("div",{className:"w-full max-w-sm"},React.createElement("button",{onClick:()=>{k("choice"),c(""),T("")},className:"text-neutral-400 mb-6 flex items-center gap-2"},"\u2190 Retour"),React.createElement("h2",{className:"text-xl font-bold text-white mb-6"},M==="create"?"\u{1F195} Nouvelle session":"\u{1F517} Rejoindre"),React.createElement("div",{className:"space-y-4"},React.createElement("div",null,React.createElement("label",{className:"block text-neutral-400 text-sm mb-2"},"Ton pr\xE9nom"),React.createElement("input",{type:"text",value:Z,onChange:$=>qe($.target.value),className:"w-full px-4 py-3 bg-neutral-900 border border-neutral-700 rounded-xl text-white text-lg",placeholder:"Ex: Kevin"})),M==="create"&&React.createElement("div",null,React.createElement("label",{className:"block text-neutral-400 text-sm mb-2"},"\u{1F510} Mot de passe administrateur"),React.createElement("input",{type:"password",value:Ae,onChange:$=>T($.target.value),className:"w-full px-4 py-3 bg-neutral-900 border border-neutral-700 rounded-xl text-white text-lg",placeholder:"Mot de passe..."}),React.createElement("p",{className:"text-neutral-500 text-xs mt-1"},"Requis pour cr\xE9er une nouvelle session")),M==="join"&&React.createElement("div",null,React.createElement("label",{className:"block text-neutral-400 text-sm mb-2"},"Code de session"),React.createElement("input",{type:"text",value:be,onChange:$=>ne($.target.value.toUpperCase()),className:"w-full px-4 py-3 bg-neutral-900 border border-neutral-700 rounded-xl text-white text-lg text-center tracking-widest",placeholder:"HF26-XXXX",maxLength:9})),_e&&React.createElement("div",{className:"p-3 bg-red-900/50 border border-red-700 rounded-xl text-red-300 text-sm"},_e),React.createElement("button",{onClick:M==="create"?ze:Ge,disabled:he,className:"w-full py-4 bg-red-600 text-white rounded-xl font-bold text-lg hover:bg-red-700 transition-colors disabled:opacity-50"},he?"\u23F3 Connexion...":M==="create"?"\u2728 Cr\xE9er":"\u{1F680} Rejoindre"))))},Ya=()=>{var Ls,Os,qs,_s,Js;const[p,M]=m(null),[k,be]=m(""),[ne,Z]=m(!0),[qe,_e]=m([]);Y(()=>{Ka()},[]);const[c,he]=m({stockInitialBiere:50,stockInitialCidre:20,maxFutsParBar:3,nombreJours:4,prixPinte:6,prixPichet:15,prixGobelet:2,volumePinte:.5,volumePichet:1.5,volumeFutBiere:30,volumeFutCidre:20,seuilPerte:10}),[w,O]=m([]),[ce,Je]=m([]),[F,Me]=m([]),[P,ke]=m([]),[ft,Ue]=m([]),[d,fe]=m(1),[D,gt]=m([{id:"c1",label:"11h30-13h"},{id:"c2",label:"13h-15h"},{id:"c3",label:"15h-18h"},{id:"c4",label:"18h-22h30"},{id:"c5",label:"22h30-00h30"}]),[ee,Ae]=m({}),[T,ge]=m(!1),[_,Ee]=m(!1),[vt,Re]=m(!1),[Te,He]=m(""),[ze,Ge]=m(null),[$,R]=m(!1),[V,z]=m(!1),[j,ye]=m(!1),[zs,Ie]=m(!1),[te,Nt]=m(null),[ts,Xe]=m("choix"),[Gs,ht]=m(""),[yt,Ke]=m(""),[Xs,Qe]=m(!1),[Ks,ss]=m(!1),[Qs,wt]=m(!1),[Ws,We]=m(!1),[we,Ce]=m("planning"),[J,je]=m(null),[G,re]=m(null),[me,Ye]=m([]),[Ze,Ct]=m(""),[X,De]=m(""),[le,Ve]=m(""),[as,Ft]=m(""),[$t,Pt]=m(""),[St,kt]=m(""),[At,Et]=m(""),[ns,Rt]=m(""),[Fe,Tt]=m(!1),[rs,It]=m(""),[ls,jt]=m(!1),[os,is]=m({}),[Ys,Dt]=m(!1),[ds,Vt]=m(""),[Zs,Be]=m(null),[Bt,us]=m(""),[Lt,cs]=m(null),A=(e,t="success")=>{cs({message:e,type:t}),setTimeout(()=>cs(null),3e3)},[K,pe]=m(!1),[Ot,ea]=m("tous"),[qt,ta]=m("tous"),[_t,sa]=m(""),[Jt,aa]=m(""),[na,ms]=m(!1),[xe,et]=m("synthese"),[ra,ps]=m(!1),[Za,xs]=m([]),[ve,bs]=m([]),[la,fs]=m(!1),[gs,vs]=m([]),[Mt,Ns]=m(!1),[tt,hs]=m(""),[oa,Ut]=m(!1),[q,st]=m(null),[ia,at]=m(!1),[se,nt]=m(0),[Le,ys]=m(""),[en,tn]=m(!1),[da,ws]=m(!1),[U,Ht]=m(!1),[rt,Cs]=m({}),[$e,lt]=m(null),[ua,ot]=m(null),[,ca]=m(0),ma=e=>{const s=Date.now()-e,a=Math.floor(s/(1e3*60*60)),r=Math.floor(s%(1e3*60*60)/(1e3*60));return a>0?`${a}h${r.toString().padStart(2,"0")}`:`${r}min`},Fs=e=>{const t=(Date.now()-e)/36e5;return t>=4?"bg-red-600 text-white":t>=3?"bg-orange-500 text-white":t>=1.5?"bg-yellow-500 text-black":"bg-neutral-700"},$s=["bg-red-600","bg-blue-600","bg-green-600","bg-yellow-600","bg-purple-600","bg-pink-600","bg-indigo-600","bg-teal-600","bg-orange-600","bg-cyan-600"],Ps=e=>{const t=w.findIndex(s=>s.id===e);return $s[t%$s.length]};Y(()=>{if(!p)return;const e=v.ref(`sessions/${p}`);e.child("config").on("value",a=>{a.val()&&he(a.val())}),e.child("config/adminEmail").on("value",a=>{a.val()&&ys(a.val())}),e.child("barsNomades").on("value",a=>{if(a.val()){const r=Object.entries(a.val()).map(([n,o])=>({id:n,...o}));O(r),r.length>0&&!J&&je(r[0].id)}else O([])}),e.child("barPositions").on("value",a=>{a.val()?Cs(a.val()):Cs({})}),e.child("historique").on("value",a=>{if(a.val()){const r=Object.entries(a.val()).map(([n,o])=>({id:n,...o}));r.sort((n,o)=>o.timestamp-n.timestamp),Me(r)}else Me([])}),e.child("historiqueVentes").on("value",a=>{if(a.val()){const r=Object.entries(a.val()).map(([n,o])=>({id:n,...o}));r.sort((n,o)=>o.timestamp-n.timestamp),ke(r)}else ke([])}),e.child("creneauxUtilises").on("value",a=>{a.val()?is(a.val()):is({})}),e.child("benevoles").on("value",a=>{if(a.val()){const r=Object.entries(a.val()).map(([n,o])=>({id:n,...o}));Ue(r)}else Ue([])}),e.child("users").on("value",a=>{if(a.val()){const r=Object.keys(a.val());_e(r)}}),e.child("jourActuel").on("value",a=>{a.val()&&fe(a.val())}),e.child("creneaux").on("value",a=>{if(a.val()){const r=Array.isArray(a.val())?a.val():Object.values(a.val());gt(r)}}),e.child("futsEnAttente").on("value",a=>{if(a.val()){const r=Object.entries(a.val()).map(([n,o])=>({id:n,...o}));Je(r)}else Je([])});const t=v.ref(".info/connected");t.on("value",a=>{Z(a.val()===!0)});const s=setInterval(()=>{e.child(`users/${k}/lastActive`).set(Date.now())},3e4);return e.child(`users/${k}`).on("value",a=>{!a.exists()&&p&&(alert("Vous avez \xE9t\xE9 d\xE9connect\xE9 par un administrateur."),M(null),be(""),ge(!1))}),()=>{e.off(),t.off(),clearInterval(s)}},[p,k]),Y(()=>{const e=setInterval(()=>{ca(t=>t+1)},6e4);return()=>clearInterval(e)},[]),Y(()=>{if(!p||!_||!Le)return;let e=!1;const t=setInterval(()=>{const s=new Date,a=s.getHours(),r=s.getMinutes();a===0&&r===30&&!e&&(e=!0,pa(),setTimeout(()=>{e=!1},12e4))},3e4);return()=>clearInterval(t)},[p,_,Le,d]);const pa=()=>{Bs().save(`Bilan_J${d}_${new Date().toISOString().split("T")[0]}.pdf`);const t=Wt(),s=mt();let a=`[Hellfest 2026] Bilan J${d} - ${t.totalVentesJour.toFixed(2)}\u20AC`,r=`Bilan automatique J${d} - ${new Date().toLocaleDateString("fr-FR")}%0D%0A%0D%0A`;r+="R\xC9SUM\xC9:%0D%0A",r+=`- Ventes du jour: ${t.totalVentesJour.toFixed(2)}\u20AC%0D%0A`,r+=`- F\xFBts en circulation: ${t.futsEnCirculation}%0D%0A`,s&&(r+=`%0D%0ACOMPARAISON J${s.jour} vs J${s.jourMoins1}:%0D%0A`,r+=`- \xC9cart ventes: ${s.ecartVentes>=0?"+":""}${s.ecartVentes.toFixed(2)}\u20AC (${s.ecartPourcent}%)%0D%0A`),r+="%0D%0ALe PDF d\xE9taill\xE9 a \xE9t\xE9 t\xE9l\xE9charg\xE9 automatiquement.%0D%0A",r+=`Session: ${p}`,window.open(`mailto:${Le}?subject=${encodeURIComponent(a)}&body=${r}`,"_blank"),A("\u{1F4E7} Bilan g\xE9n\xE9r\xE9 - V\xE9rifiez votre client mail")};Y(()=>{if(!p)return;const e=v.ref(`sessions/${p}/annonces`);return e.orderByChild("timestamp").limitToLast(5).on("value",t=>{if(t.val()){const s=Object.entries(t.val()).map(([a,r])=>({id:a,...r}));s.sort((a,r)=>r.timestamp-a.timestamp),vs(s)}else vs([])}),()=>e.off()},[p]),Y(()=>{ne&&ve.length>0&&!la&&xa()},[ne,ve]);const xa=async()=>{if(ve.length!==0){fs(!0);for(const e of ve)try{e.type==="SORTIE"?(await v.ref(`sessions/${p}/barsNomades/${e.barId}/futs`).set(e.futs),await v.ref(`sessions/${p}/historique`).push(e.historique)):e.type==="VENTE"&&await v.ref(`sessions/${p}/historiqueVentes`).push(e.data)}catch(t){console.error("Erreur sync:",t)}bs([]),fs(!1),A(`\u2705 ${ve.length} action(s) synchronis\xE9e(s)`)}},sn=e=>{bs(t=>[...t,e]),A("\u23F3 Action en attente (hors-ligne)","warning")};Y(()=>{if(!p)return;const e=setInterval(()=>{const t={session:p,timestamp:Date.now(),config:c,barsNomades:w,historique:F,historiqueVentes:P,affectations:ee,jourActuel:d},s=JSON.parse(localStorage.getItem("gestionFuts_backups")||"[]");s.unshift(t);const a=s.slice(0,24);localStorage.setItem("gestionFuts_backups",JSON.stringify(a)),console.log("Backup automatique effectu\xE9:",new Date().toLocaleString())},36e5);return setTimeout(()=>{const t={session:p,timestamp:Date.now(),config:c,barsNomades:w,historique:F,historiqueVentes:P,affectations:ee,jourActuel:d},s=JSON.parse(localStorage.getItem("gestionFuts_backups")||"[]");s.unshift(t),localStorage.setItem("gestionFuts_backups",JSON.stringify(s.slice(0,24)))},5e3),()=>clearInterval(e)},[p,c,w,F,P,ee,d]),Y(()=>{if(!p||!d)return;const e=v.ref(`sessions/${p}/affectations/jour${d}`);return e.on("value",t=>{t.val()?Ae(t.val()):Ae({})}),()=>{e.off()}},[p,d]),Y(()=>{if(!p)return;const e=v.ref(`sessions/${p}/auditLogs`);return e.orderByChild("timestamp").limitToLast(100).on("value",t=>{if(t.val()){const s=Object.entries(t.val()).map(([a,r])=>({id:a,...r}));s.sort((a,r)=>r.timestamp-a.timestamp),xs(s)}else xs([])}),()=>{e.off()}},[p]);const ba=async e=>{!T||e===k||confirm(`\xCAtes-vous s\xFBr de vouloir \xE9jecter ${e} ?`)&&await v.ref(`sessions/${p}/users/${e}`).remove()},oe=c.stockInitialBiere-F.filter(e=>!e.annule&&e.type==="SORTIE"&&e.typeFut==="biere").length+F.filter(e=>!e.annule&&e.type==="RETOUR_PLEIN"&&e.typeFut==="biere").length,ie=c.stockInitialCidre-F.filter(e=>!e.annule&&e.type==="SORTIE"&&e.typeFut==="cidre").length+F.filter(e=>!e.annule&&e.type==="RETOUR_PLEIN"&&e.typeFut==="cidre").length,fa=F.filter(e=>!e.annule&&e.type==="RETOUR_VIDE").length,ga=F.filter(e=>!e.annule&&e.type==="RETOUR_CASSE").length,va=F.filter(e=>!e.annule&&e.type==="RETOUR_REUTILISABLE").length,an=F.filter(e=>!e.annule&&e.type==="RETOUR_PLEIN").length,Ss=P.filter(e=>!e.annule).reduce((e,t)=>e+(t.montant||0),0),de=(()=>{let e=0;return Object.values(ee).forEach(t=>{Object.values(t||{}).forEach(s=>{var a,r,n;s&&((a=s.vendeur)!=null&&a.nom||(r=s.serveur)!=null&&r.nom||(n=s.runner)!=null&&n.nom)&&e++})}),e})(),Na=(e,t,s=!1)=>{M(e),be(t),s&&(ge(!0),Ee(!0)),localStorage.setItem("gestionFuts_session",e),localStorage.setItem("gestionFuts_userName",t),s&&(localStorage.setItem("gestionFuts_isAdmin","true"),localStorage.setItem("gestionFuts_isCreator","true")),localStorage.getItem("gestionFuts_tutorielVu")||setTimeout(()=>{at(!0),nt(0)},500)},ha=()=>{confirm("Voulez-vous vous d\xE9connecter de cette session ?")&&(M(null),be(""),ge(!1),Ee(!1))},rn=()=>{localStorage.removeItem("gestionFuts_session"),localStorage.removeItem("gestionFuts_userName"),localStorage.removeItem("gestionFuts_isAdmin"),localStorage.removeItem("gestionFuts_isCreator")},Oe=e=>{T?As(e):(Ge(e),He(""),Re(!0))},ks=()=>{bt(Te,"admin")?(ge(!0),Re(!1),ze&&(As(ze),Ge(null))):alert("Mot de passe incorrect")},As=e=>{switch(e){case"parametres":R(!0);break;case"export":Ie(!0);break;case"historique":z(!V);break;case"ventes":ye(!j);break;case"jour_prev":d>1&&v.ref(`sessions/${p}/jourActuel`).set(d-1);break;case"jour_next":d<c.nombreJours&&v.ref(`sessions/${p}/jourActuel`).set(d+1);break}},ya=async(e,t)=>{await v.ref(`sessions/${p}/barsNomades`).push().set({nom:e,type:t,futs:[]})},wa=async e=>{var s;const t=w.find(a=>a.id===e);if(((s=t==null?void 0:t.futs)==null?void 0:s.length)>0){alert("Impossible de supprimer un bar avec des f\xFBts en cours");return}await v.ref(`sessions/${p}/barsNomades/${e}`).remove();for(let a=1;a<=c.nombreJours;a++)await v.ref(`sessions/${p}/affectations/jour${a}/${e}`).remove()},Es=async(e,t)=>{t.trim()&&(await v.ref(`sessions/${p}/barsNomades/${e}/nom`).set(t.trim()),A(`\u2705 Bar renomm\xE9 en "${t.trim()}"`))},it=async(e,t)=>{const s={action:e,details:t,user:k,timestamp:Date.now(),jour:d};await v.ref(`sessions/${p}/auditLogs`).push(s)},Ca=async e=>{if(K)return;const t=w.find(r=>r.id===e);if(!t)return;const s=t.futs||[];if(s.length>=c.maxFutsParBar)return;const a=t.type;if(!(a==="biere"&&oe<=0)&&!(a==="cidre"&&ie<=0)){pe(!0);try{const r={id:Date.now().toString(),type:a,dateAttribution:Date.now()},n=[...s,r];await v.ref(`sessions/${p}/barsNomades/${e}/futs`).set(n),await v.ref(`sessions/${p}/historique`).push({type:"SORTIE",typeFut:a,barId:e,barNom:t.nom,jour:d,timestamp:Date.now(),user:k}),await it("SORTIE_FUT",`${a==="biere"?"\u{1F37A} Bi\xE8re":"\u{1F34E} Cidre"} \u2192 ${t.nom}`),A(`\u2705 F\xFBt ${a==="biere"?"\u{1F37A}":"\u{1F34E}"} attribu\xE9 \xE0 ${t.nom}`)}catch(r){A("\u274C Erreur lors de l'attribution","error")}finally{setTimeout(()=>pe(!1),1e3)}}},dt=async(e,t,s,a="")=>{if(K)return;const r=w.find(u=>u.id===e);if(!r)return;const n=r.futs||[],o=n[t];if(o){pe(!0);try{const u=n.filter((f,i)=>i!==t);await v.ref(`sessions/${p}/barsNomades/${e}/futs`).set(u.length>0?u:null);const g={type:s,typeFut:o.type,barId:e,barNom:r.nom,jour:d,timestamp:Date.now(),user:k};a.trim()&&(g.commentaire=a.trim()),await v.ref(`sessions/${p}/historique`).push(g),s==="RETOUR_REUTILISABLE"&&await v.ref(`sessions/${p}/futsEnAttente`).push({typeFut:o.type,barId:e,barNom:r.nom,jourOrigine:d,timestamp:Date.now(),user:k});const l={RETOUR_VIDE:"\u{1F4E6} Vide",RETOUR_CASSE:"\u{1F4A5} Cass\xE9",RETOUR_REUTILISABLE:"\u267B\uFE0F Non termin\xE9",RETOUR_PLEIN:"\u{1F504} Plein (r\xE9int\xE9gr\xE9 au stock)"};await it("RETOUR_FUT",`${l[s]} de ${r.nom}`),A(`\u2705 F\xFBt retourn\xE9 (${l[s]})`)}catch(u){A("\u274C Erreur lors du retour","error")}finally{setTimeout(()=>pe(!1),1e3)}Nt(null),Xe("choix"),ht(""),Ke("")}},Fa=async(e,t)=>{const s=w.find(g=>g.id===t);if(!s)return;const r=(await v.ref(`sessions/${p}/futsEnAttente/${e}`).once("value")).val();if(!r)return;const n=s.futs||[],o={type:r.typeFut,addedAt:Date.now(),reprisDe:r.jourOrigine},u=[...n,o];await v.ref(`sessions/${p}/barsNomades/${t}/futs`).set(u),await v.ref(`sessions/${p}/historique`).push({type:"REPRISE",typeFut:r.typeFut,barId:t,barNom:s.nom,jour:d,timestamp:Date.now(),user:k,commentaire:`Reprise du J${r.jourOrigine}`}),await v.ref(`sessions/${p}/futsEnAttente/${e}`).remove()},$a=async()=>{if(!X||K)return;if(!le){A("\u274C S\xE9lectionnez un cr\xE9neau horaire","error");return}if($t===""||St===""||At===""){A("\u274C Renseignez le nombre de pintes, pichets et gobelets","error");return}const e=parseFloat(as)||0;if(e<=0){A("\u274C Le montant doit \xEAtre sup\xE9rieur \xE0 0","error");return}const t=w.find(s=>s.id===X);pe(!0);try{if(await v.ref(`sessions/${p}/historiqueVentes`).push({barId:X,barNom:(t==null?void 0:t.nom)||"Bar inconnu",creneau:le,montant:e,nbPintes:parseInt($t)||0,nbPichets:parseInt(St)||0,nbGobelets:parseInt(At)||0,equipementDefaillant:Fe,numEquipement:Fe?rs.trim():"",donneesPartielles:Fe?ls:!1,commentaire:ns,jour:d,timestamp:Date.now(),user:k}),!Fe){const s=`J${d}_${X}_${le}`;await v.ref(`sessions/${p}/creneauxUtilises/${s}`).set({barId:X,creneau:le,jour:d,timestamp:Date.now(),user:k}),await v.ref(`sessions/${p}/creneauxEnAttente/${s}`).remove()}await it("VENTE",`${e.toFixed(2)}\u20AC - ${(t==null?void 0:t.nom)||"Bar inconnu"} (${le})`),A(`\u2705 Vente enregistr\xE9e (${e.toFixed(2)}\u20AC)`),Qe(!1),De(""),Ve(""),Ft(""),Pt(""),kt(""),Et(""),Tt(!1),It(""),jt(!1),Rt("")}catch(s){A("\u274C Erreur lors de l'enregistrement","error")}finally{setTimeout(()=>pe(!1),1e3)}},Pa=async e=>{await v.ref(`sessions/${p}/config`).update(e),R(!1)},Sa=async(e,t,s)=>{await v.ref(`sessions/${p}/barPositions/${e}`).set({x:t,y:s})},ka=e=>{if(!U||!$e)return;const t=e.currentTarget.getBoundingClientRect(),s=(e.clientX-t.left)/t.width*100,a=(e.clientY-t.top)/t.height*100;Sa($e,s,a);const r=w.filter(o=>!rt[o.id]),n=r.findIndex(o=>o.id===$e);n<r.length-1?lt(r[n+1].id):(lt(null),Ht(!1),A("\u2705 Tous les bars sont positionn\xE9s !"))},Aa=async e=>{await v.ref(`sessions/${p}/barPositions/${e}`).remove()},Ea=async()=>{confirm("R\xE9initialiser toutes les positions des bars sur le plan ?")&&(await v.ref(`sessions/${p}/barPositions`).remove(),A("Positions r\xE9initialis\xE9es"))},Rs=async e=>{if(!bt(ds,"admin")){alert("Mot de passe incorrect");return}e&&(Is(),js(),Xt()),await v.ref(`sessions/${p}/historique`).remove(),await v.ref(`sessions/${p}/historiqueVentes`).remove(),await v.ref(`sessions/${p}/affectations`).remove(),await v.ref(`sessions/${p}/futsEnAttente`).remove(),await v.ref(`sessions/${p}/creneauxUtilises`).remove(),await v.ref(`sessions/${p}/creneauxEnAttente`).remove();for(const s of w)await v.ref(`sessions/${p}/barsNomades/${s.id}/futs`).set(null);Dt(!1),Vt(""),alert("R\xE9initialisation effectu\xE9e !")},Ra=async e=>{const t=P.find(a=>a.id===e);if(!t||!confirm(`Annuler cette vente ?

Le cr\xE9neau sera de nouveau disponible pour une nouvelle saisie.`))return;await v.ref(`sessions/${p}/historiqueVentes/${e}`).update({annule:!0,annulePar:k,annuleLe:Date.now()});const s=`J${t.jour}_${t.barId}_${t.creneau}`;await v.ref(`sessions/${p}/creneauxUtilises/${s}`).remove(),A("\u2705 Vente annul\xE9e, cr\xE9neau lib\xE9r\xE9")},Ta=async e=>{const t=F.find(o=>o.id===e);if(!t)return;let s=`Annuler ce mouvement de f\xFBt ?

`;if(t.type==="SORTIE"||t.type==="REPRISE"?s+=`\u2192 Le f\xFBt ${t.typeFut==="biere"?"\u{1F37A} Bi\xE8re":"\u{1F34E} Cidre"} sera RETIR\xC9 du bar "${t.barNom}"`:s+=`\u2192 Le f\xFBt ${t.typeFut==="biere"?"\u{1F37A} Bi\xE8re":"\u{1F34E} Cidre"} sera REMIS dans le bar "${t.barNom}"`,!confirm(s))return;await v.ref(`sessions/${p}/historique/${e}`).update({annule:!0,annulePar:k,annuleLe:Date.now()});const a=v.ref(`sessions/${p}/barsNomades/${t.barId}/futs`);let n=(await a.once("value")).val()||[];if(Array.isArray(n)||(n=Object.values(n)),t.type==="SORTIE"||t.type==="REPRISE"){let o=-1;for(let u=n.length-1;u>=0;u--)if(n[u]&&n[u].type===t.typeFut){o=u;break}o!==-1&&(n.splice(o,1),await a.set(n.length>0?n:null)),t.type==="REPRISE"&&await v.ref(`sessions/${p}/futsEnAttente`).push({typeFut:t.typeFut,barId:t.barId,barNom:t.barNom,jourOrigine:d,timestamp:Date.now(),user:k})}else if((t.type==="RETOUR_VIDE"||t.type==="RETOUR_CASSE"||t.type==="RETOUR_REUTILISABLE")&&(n.push({type:t.typeFut,addedAt:Date.now()}),await a.set(n),t.type==="RETOUR_REUTILISABLE")){const u=(await v.ref(`sessions/${p}/futsEnAttente`).once("value")).val();if(u){for(const[g,l]of Object.entries(u))if(l.barId===t.barId&&l.typeFut===t.typeFut&&l.jourOrigine===t.jour){await v.ref(`sessions/${p}/futsEnAttente/${g}`).remove();break}}}},Ia=()=>{Ce("planning"),w.length>0&&!J&&je(w[0].id),ss(!0)},ut=(e,t)=>{var s;return((s=ee[e])==null?void 0:s[t])||null},ja=(e,t)=>{const s=ut(e,t)||{vendeur:{nom:"",prenom:""},serveur:{nom:"",prenom:""},runner:{nom:"",prenom:""}};re({barId:e,creneauId:t,vendeur:{...s.vendeur},serveur:{...s.serveur},runner:{...s.runner}}),wt(!0)},Da=async()=>{if(!G)return;const{barId:e,creneauId:t,vendeur:s,serveur:a,runner:r}=G;await v.ref(`sessions/${p}/affectations/jour${d}/${e}/${t}`).set({vendeur:s,serveur:a,runner:r}),wt(!1),re(null)},Va=async(e,t)=>{await v.ref(`sessions/${p}/affectations/jour${d}/${e}/${t}`).remove()},Ba=()=>{Ye([...D]),Ct(""),Ce("parametres")},Ts=()=>{if(Ze.trim()&&me.length<10){const e="c"+Date.now();Ye([...me,{id:e,label:Ze.trim()}]),Ct("")}},La=e=>{Ye(me.filter(t=>t.id!==e))},Oa=async()=>{await v.ref(`sessions/${p}/creneaux`).set(me),Ce("planning")},ue=e=>!e||!e.nom&&!e.prenom?"-":`${e.prenom||""} ${e.nom||""}`.trim(),ct=e=>new Date(e).toLocaleString("fr-FR"),zt=()=>{const e=new Date;return`${e.getFullYear()}${String(e.getMonth()+1).padStart(2,"0")}${String(e.getDate()).padStart(2,"0")}_${String(e.getHours()).padStart(2,"0")}${String(e.getMinutes()).padStart(2,"0")}`},Gt=(e,t)=>{const a=new Blob(["\uFEFF"+t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(a),r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)},Is=()=>{if(F.length===0)return;const e=["Date/Heure","Type","F\xFBt","Bar","Jour","Utilisateur","Commentaire","Annul\xE9","Annul\xE9 par","Date annulation"],t=F.map(s=>[`"${ct(s.timestamp)}"`,`"${s.type}"`,`"${s.typeFut}"`,`"${s.barNom}"`,s.jour,`"${s.user}"`,`"${s.commentaire||""}"`,s.annule?"Oui":"Non",`"${s.annulePar||""}"`,s.annuleLe?`"${ct(s.annuleLe)}"`:'""'].join(";"));Gt(`Historique_Futs_${zt()}.csv`,e.join(";")+`
`+t.join(`
`))},js=()=>{if(P.length===0)return;const e=["Date/Heure","Bar","Montant","Pintes","Pichets","Gobelets","Jour","\xC9quip. d\xE9faillant","N\xB0 \xE9quipement","Donn\xE9es partielles","Commentaire","Annul\xE9","Annul\xE9 par","Date annulation"],t=P.map(a=>[`"${ct(a.timestamp)}"`,`"${a.barNom}"`,(a.montant||0).toFixed(2).replace(".",","),a.nbPintes||0,a.nbPichets||0,a.nbGobelets||0,a.jour,a.equipementDefaillant?"Oui":"Non",`"${a.numEquipement||""}"`,a.donneesPartielles?"Oui":"Non",`"${a.commentaire||""}"`,a.annule?"Oui":"Non",`"${a.annulePar||""}"`,a.annuleLe?`"${ct(a.annuleLe)}"`:'""'].join(";")),s=P.filter(a=>!a.annule).reduce((a,r)=>a+(r.montant||0),0);Gt(`Historique_Ventes_${zt()}.csv`,e.join(";")+`
`+t.join(`
`)+`

TOTAL;`+s.toFixed(2).replace(".",",")+" \u20AC")},Xt=()=>{if(de===0)return;const e=["Jour","Bar Nomade","Cr\xE9neau","Vendeur","Serveur","Runner"],t=[];w.forEach(s=>{D.forEach(a=>{const r=ut(s.id,a.id);t.push([`J${d}`,`"${s.nom}"`,`"${a.label}"`,`"${r?ue(r.vendeur):"-"}"`,`"${r?ue(r.serveur):"-"}"`,`"${r?ue(r.runner):"-"}"`].join(";"))})}),Gt(`Planning_Benevoles_J${d}_${zt()}.csv`,e.join(";")+`
`+t.join(`
`)+`

Jour;J`+d+`
Total affectations;`+de)},qa=async()=>{if(d<=1)return;const e=d-1,s=(await v.ref(`sessions/${p}/affectations/jour${e}`).once("value")).val();if(!s){A(`\u274C Aucune affectation trouv\xE9e pour J${e}`,"error");return}if(confirm(`Copier les affectations de J${e} vers J${d} ?

Les affectations existantes seront \xE9cras\xE9es.`)){pe(!0);try{await v.ref(`sessions/${p}/affectations/jour${d}`).set(s),await it("COPIE_AFFECTATIONS",`Copie de J${e} vers J${d}`),A(`\u2705 Affectations copi\xE9es depuis J${e}`)}catch(a){A("\u274C Erreur lors de la copie","error")}finally{setTimeout(()=>pe(!1),1e3)}}},Kt=F.filter(e=>{var t,s,a,r;if(Ot!=="tous"&&e.jour!==parseInt(Ot))return!1;if(_t.trim()){const n=_t.toLowerCase();return((t=e.barNom)==null?void 0:t.toLowerCase().includes(n))||((s=e.user)==null?void 0:s.toLowerCase().includes(n))||((a=e.type)==null?void 0:a.toLowerCase().includes(n))||((r=e.commentaire)==null?void 0:r.toLowerCase().includes(n))}return!0}),Qt=P.filter(e=>{var t,s,a;if(qt!=="tous"&&e.jour!==parseInt(qt))return!1;if(Jt.trim()){const r=Jt.toLowerCase();return((t=e.barNom)==null?void 0:t.toLowerCase().includes(r))||((s=e.user)==null?void 0:s.toLowerCase().includes(r))||((a=e.commentaire)==null?void 0:a.toLowerCase().includes(r))}return!0}),Wt=()=>{const e=F.filter(n=>!n.annule&&n.jour===d),t=e.filter(n=>n.type==="SORTIE").length-e.filter(n=>n.type.startsWith("RETOUR_")).length,s={};for(let n=1;n<=c.nombreJours;n++)s[n]=P.filter(o=>!o.annule&&o.jour===n).reduce((o,u)=>o+(u.montant||0),0);const a=w.filter(n=>!n.futs||n.futs.length===0),r=P.filter(n=>!n.annule&&n.equipementDefaillant&&n.jour===d);return{futsEnCirculation:t,ventesParJour:s,barsSansFut:a,equipementsDefaillants:r,totalVentesJour:s[d]||0}},mt=()=>{if(d<=1)return null;const e=new Date().getHours(),t=new Date().getMinutes(),s=P.filter(y=>!y.annule&&y.jour===d),a=s.reduce((y,h)=>y+(h.montant||0),0),r=s.length,n=P.filter(y=>{if(y.annule||y.jour!==d-1)return!1;const h=new Date(y.timestamp).getHours(),C=new Date(y.timestamp).getMinutes();return h<e||h===e&&C<=t}),o=n.reduce((y,h)=>y+(h.montant||0),0),u=n.length,g=P.filter(y=>!y.annule&&y.jour===d-1).reduce((y,h)=>y+(h.montant||0),0),l=F.filter(y=>!y.annule&&y.jour===d&&y.type==="SORTIE").length,f=F.filter(y=>{if(y.annule||y.jour!==d-1||y.type!=="SORTIE")return!1;const h=new Date(y.timestamp).getHours();return h<e||h===e}).length,i=a-o,x=o>0?(i/o*100).toFixed(1):0,N=l-f;return{jour:d,jourMoins1:d-1,heureComparaison:`${e}h${t.toString().padStart(2,"0")}`,ventesJour:a,ventesJMoins1:o,totalFinalJMoins1:g,ecartVentes:i,ecartPourcent:parseFloat(x),tendance:i>=0?"hausse":"baisse",nbTransactionsJour:r,nbTransactionsJMoins1:u,futsJour:l,futsJMoins1:f,ecartFuts:N}},Pe=(e=d)=>{const t=F.filter(S=>!S.annule&&S.jour===e&&S.type==="RETOUR_VIDE"&&S.typeFut==="biere").length,s=F.filter(S=>!S.annule&&S.jour===e&&S.type==="RETOUR_VIDE"&&S.typeFut==="cidre").length,a=t*c.volumeFutBiere,r=s*c.volumeFutCidre,n=P.filter(S=>!S.annule&&S.jour===e),o=n.filter(S=>{const E=w.find(es=>es.id===S.barId);return(E==null?void 0:E.type)==="biere"}),u=n.filter(S=>{const E=w.find(es=>es.id===S.barId);return(E==null?void 0:E.type)==="cidre"}),g=o.reduce((S,E)=>S+(E.nbPintes||0),0),l=o.reduce((S,E)=>S+(E.nbPichets||0),0),f=o.reduce((S,E)=>S+(E.nbGobelets||0),0),i=u.reduce((S,E)=>S+(E.nbPintes||0),0),x=u.reduce((S,E)=>S+(E.nbPichets||0),0),N=u.reduce((S,E)=>S+(E.nbGobelets||0),0),y=g*c.volumePinte+l*c.volumePichet,h=i*c.volumePinte+x*c.volumePichet,C=o.reduce((S,E)=>S+(E.montant||0),0),I=u.reduce((S,E)=>S+(E.montant||0),0),B=g*c.prixPinte+l*c.prixPichet+f*c.prixGobelet,Q=i*c.prixPinte+x*c.prixPichet+N*c.prixGobelet,ae=a-y,W=r-h,b=a>0?ae/a*100:0,L=r>0?W/r*100:0,H=a+r>0?(ae+W)/(a+r)*100:0,Ne=C-B,xt=I-Q,Ga=B>0?C/B*100:100,Xa=Q>0?I/Q*100:100,Ms=ae>0?ae/c.volumePinte*c.prixPinte:0,Us=W>0?W/c.volumePinte*c.prixPinte:0,Zt=S=>S<=c.seuilPerte?"ok":S<=c.seuilPerte*1.5?"attention":"alerte";return{biere:{futsVides:t,volumeSorti:a,pintes:g,pichets:l,gobelets:f,volumeVendu:y,ecartVolume:ae,tauxPerte:b,statutPerte:Zt(b),caDeclare:C,caTheorique:B,ecartCa:Ne,coherenceCa:Ga,manqueAGagner:Ms},cidre:{futsVides:s,volumeSorti:r,pintes:i,pichets:x,gobelets:N,volumeVendu:h,ecartVolume:W,tauxPerte:L,statutPerte:Zt(L),caDeclare:I,caTheorique:Q,ecartCa:xt,coherenceCa:Xa,manqueAGagner:Us},total:{futsVides:t+s,volumeSorti:a+r,volumeVendu:y+h,ecartVolume:ae+W,tauxPerte:H,statutPerte:Zt(H),caDeclare:C+I,caTheorique:B+Q,ecartCa:Ne+xt,manqueAGagner:Ms+Us}}},Se=(e=d)=>w.map(t=>{const a=t.type==="biere"?c.volumeFutBiere:c.volumeFutCidre,r=F.filter(C=>!C.annule&&C.jour===e&&C.type==="RETOUR_VIDE"&&C.barId===t.id).length,n=r*a,o=P.filter(C=>!C.annule&&C.jour===e&&C.barId===t.id),u=o.reduce((C,I)=>C+(I.nbPintes||0),0),g=o.reduce((C,I)=>C+(I.nbPichets||0),0),l=o.reduce((C,I)=>C+(I.nbGobelets||0),0),f=u*c.volumePinte+g*c.volumePichet,i=n-f,x=n>0?i/n*100:0,N=o.reduce((C,I)=>C+(I.montant||0),0),y=u*c.prixPinte+g*c.prixPichet+l*c.prixGobelet,h=C=>C<=c.seuilPerte?"ok":C<=c.seuilPerte*1.5?"attention":"alerte";return{barId:t.id,barNom:t.nom,type:t.type,futsVides:r,volumeSorti:n,pintes:u,pichets:g,gobelets:l,volumeVendu:f,ecartVolume:i,tauxPerte:x,statutPerte:h(x),caDeclare:N,caTheorique:y,ecartCa:N-y,ratioParFut:r>0?N/r:0}}),pt=(e=d)=>D.map(t=>{const s=P.filter(l=>!l.annule&&l.jour===e&&l.creneau===t.id),a=s.reduce((l,f)=>l+(f.nbPintes||0),0),r=s.reduce((l,f)=>l+(f.nbPichets||0),0),n=s.reduce((l,f)=>l+(f.nbGobelets||0),0),o=a*c.volumePinte+r*c.volumePichet,u=s.reduce((l,f)=>l+(f.montant||0),0),g=a*c.prixPinte+r*c.prixPichet+n*c.prixGobelet;return{creneauId:t.id,creneauLabel:t.label,nbTransactions:s.length,pintes:a,pichets:r,gobelets:n,volumeVendu:o,caDeclare:u,caTheorique:g,ecartCa:u-g,coherenceCa:g>0?u/g*100:100}}),_a=()=>{const e=Wt(),t=mt(),s=Pe(),a=Se(),r=pt(),n=e.totalVentesJour,o=[...a].sort((b,L)=>L.caDeclare-b.caDeclare),u=s.total.futsVides,g=s.biere.futsVides,l=s.cidre.futsVides,f=F.filter(b=>!b.annule&&b.jour===d&&b.type==="RETOUR_VIDE");let i=0,x=0;f.forEach(b=>{const L=F.find(H=>!H.annule&&H.jour===d&&H.type==="SORTIE"&&H.barId===b.barId&&H.timestamp<b.timestamp);L&&(i+=b.timestamp-L.timestamp,x++)});const N=x>0?i/x:0,y=Math.floor(N/(1e3*60*60)),h=Math.floor(N%(1e3*60*60)/(1e3*60)),C=N>0?`${y}h${h.toString().padStart(2,"0")}`:"-",I=s.total.tauxPerte,B=a.filter(b=>b.futsVides>0),Q=B.length>0?B.reduce((b,L)=>L.ratioParFut>b.ratioParFut?L:b,B[0]):null,ae=r.reduce((b,L)=>L.caDeclare>b.caDeclare?L:b,r[0]),W=[];for(let b=1;b<=d;b++){const H=P.filter(Ne=>!Ne.annule&&Ne.jour===b).reduce((Ne,xt)=>Ne+(xt.montant||0),0);W.push({jour:b,ca:H})}return{caTotal:n,comparaison:t,classementBars:o,futsConsommes:u,futsBiere:g,futsCidre:l,dureeMoyenne:C,tauxPerteGlobal:I,statutPerte:s.total.statutPerte,manqueAGagner:s.total.manqueAGagner,barPlusRentable:Q,picActivite:ae,progressionFestival:W}},Yt=()=>{const e=[];for(let a=1;a<=c.nombreJours;a++){const r=P.filter(i=>!i.annule&&i.jour===a),n=r.reduce((i,x)=>i+(x.montant||0),0),o=Pe(a),u=Se(a),g=u.length>0?u.reduce((i,x)=>x.caDeclare>i.caDeclare?x:i,u[0]):null,l=D.map(i=>{const x=r.filter(N=>N.creneau===i.id);return{creneau:i.label,ca:x.reduce((N,y)=>N+(y.montant||0),0)}}),f=l.reduce((i,x)=>x.ca>i.ca?x:i,l[0]);e.push({jour:a,ca:n,futsBiere:o.biere.futsVides,futsCidre:o.cidre.futsVides,tauxPerte:o.total.tauxPerte,topBar:(g==null?void 0:g.barNom)||"-",topBarCa:(g==null?void 0:g.caDeclare)||0,picCreneau:f.creneau,hasDonnees:n>0||o.total.futsVides>0})}const t=e.reduce((a,r)=>a+r.ca,0),s=e.reduce((a,r)=>a+r.futsBiere+r.futsCidre,0);return{jours:e,caTotal:t,futsTotal:s}},Ja=()=>{const t=F.filter(x=>!x.annule&&x.jour===d).filter(x=>x.type==="SORTIE"),s=x=>{if(!isFinite(x)||x>100)return null;const N=Math.floor(x),y=Math.round((x-N)*60);return N>0&&y>0?`${N}h${y.toString().padStart(2,"0")}`:N>0?`${N}h`:`${y}min`},a={biere:{rythme:"0.0",tempsRestant:null,alerte:!1},cidre:{rythme:"0.0",tempsRestant:null,alerte:!1}};if(t.length<2)return a;const r=Math.min(...t.map(x=>x.timestamp)),n=(Date.now()-r)/(1e3*60*60);if(n<.5)return a;const o=t.filter(x=>x.typeFut==="biere").length,u=t.filter(x=>x.typeFut==="cidre").length,g=o/n,l=u/n,f=g>0?oe/g:1/0,i=l>0?ie/l:1/0;return{biere:{rythme:g.toFixed(1),tempsRestant:s(f),alerte:f<4},cidre:{rythme:l.toFixed(1),tempsRestant:s(i),alerte:i<4}}},ln=()=>{const e={},t={};for(let s=10;s<=26;s++){const a=s>24?s-24:s;e[a]={sorties:0,retours:0}}return F.filter(s=>!s.annule&&s.jour===d).forEach(s=>{const a=new Date(s.timestamp).getHours();e[a]||(e[a]={sorties:0,retours:0}),s.type==="SORTIE"?e[a].sorties++:s.type.startsWith("RETOUR_")&&e[a].retours++,t[s.barId]||(t[s.barId]={}),t[s.barId][a]||(t[s.barId][a]={sorties:0,retours:0}),s.type==="SORTIE"?t[s.barId][a].sorties++:s.type.startsWith("RETOUR_")&&t[s.barId][a].retours++}),{statsParHeure:e,statsParBarEtHeure:t}},Ds=()=>w.map(e=>{const t=P.filter(o=>!o.annule&&o.barId===e.id).reduce((o,u)=>o+(u.montant||0),0),s=F.filter(o=>!o.annule&&o.barId===e.id&&o.type.startsWith("RETOUR_")).length,a=F.filter(o=>!o.annule&&o.barId===e.id&&o.type==="SORTIE"),r=F.filter(o=>!o.annule&&o.barId===e.id&&o.type.startsWith("RETOUR_"));let n=0;return r.length>0&&(n=r.reduce((u,g)=>{const l=a.find(f=>f.timestamp<g.timestamp);return l?u+(g.timestamp-l.timestamp):u},0)/r.length/(1e3*60*60)),{...e,chiffreAffaires:t,futsConsommes:s,rotationMoyenne:n}}).sort((e,t)=>t.chiffreAffaires-e.chiffreAffaires),Ma=()=>{const e=[],t=[10,11,12,13,14,15,16,17,18,19,20,21,22,23,0];for(const s of t){const a=F.filter(r=>r.annule||r.jour!==d?!1:new Date(r.timestamp).getHours()===s);e.push({heure:s,heureAffichage:s===0?"00":s.toString(),sorties:a.filter(r=>r.type==="SORTIE").length,retours:a.filter(r=>r.type.startsWith("RETOUR_")).length})}return e},Vs=async()=>{!tt.trim()||!_||(await v.ref(`sessions/${p}/annonces`).push({message:tt.trim(),auteur:k,timestamp:Date.now(),jour:d}),hs(""),Ns(!1),A("\u{1F4E2} Annonce envoy\xE9e"))},Ua=async e=>{_&&await v.ref(`sessions/${p}/annonces/${e}`).remove()},Bs=async()=>{await window.loadJsPDF();const{jsPDF:e}=window.jspdf,t=new e,s=P.filter(h=>!h.annule&&h.jour===d),a=F.filter(h=>!h.annule&&h.jour===d),r=P.filter(h=>!h.annule&&h.equipementDefaillant&&h.jour===d),n=s.reduce((h,C)=>h+(C.montant||0),0),o=mt(),u=Pe(),g=Se();let l=20;t.setFontSize(20),t.setTextColor(220,38,38),t.text("HELLFEST 2026 - BILAN JOURNALIER",105,l,{align:"center"}),l+=10,t.setFontSize(14),t.setTextColor(0),t.text(`Jour ${d} - ${new Date().toLocaleDateString("fr-FR")}`,105,l,{align:"center"}),l+=15,t.setFontSize(16),t.setTextColor(16,185,129),t.text("RESUME DES VENTES",20,l),l+=10,t.setFontSize(12),t.setTextColor(0),t.text(`Total du jour: ${n.toFixed(2)} EUR`,25,l),l+=7,t.text(`Nombre de transactions: ${s.length}`,25,l),l+=7,t.text(`Ticket moyen: ${s.length>0?(n/s.length).toFixed(2):0} EUR`,25,l),l+=12,o&&(t.setFontSize(14),t.setTextColor(o.tendance==="hausse"?34:220,o.tendance==="hausse"?197:38,o.tendance==="hausse"?94:38),t.text(`COMPARAISON J${o.jour} vs J${o.jourMoins1}`,20,l),l+=8,t.setFontSize(11),t.setTextColor(0),t.text(`A ${o.heureComparaison}, comparaison avec hier a la meme heure :`,25,l),l+=6,t.text(`Ventes J${o.jour}: ${o.ventesJour.toFixed(2)} EUR vs J${o.jourMoins1}: ${o.ventesJMoins1.toFixed(2)} EUR`,25,l),l+=6,t.text(`Ecart: ${o.ecartVentes>=0?"+":""}${o.ecartVentes.toFixed(2)} EUR (${o.ecartVentes>=0?"+":""}${o.ecartPourcent}%)`,25,l),l+=6,t.text(`Futs sortis: ${o.futsJour} vs ${o.futsJMoins1} hier (${o.ecartFuts>=0?"+":""}${o.ecartFuts})`,25,l),l+=6,o.totalFinalJMoins1>0&&(t.text(`Total final J${o.jourMoins1}: ${o.totalFinalJMoins1.toFixed(2)} EUR`,25,l),l+=6),l+=6),t.setFontSize(14),t.setTextColor(0),t.text("Ventes par bar:",25,l),l+=7,Ds().forEach((h,C)=>{const I=P.filter(B=>!B.annule&&B.barId===h.id&&B.jour===d).reduce((B,Q)=>B+(Q.montant||0),0);t.setFontSize(11),t.text(`${C+1}. ${h.nom} (${h.type}): ${I.toFixed(2)} EUR`,30,l),l+=6}),l+=10,t.setFontSize(16),t.setTextColor(147,51,234),t.text("MOUVEMENTS DE FUTS",20,l),l+=10,t.setFontSize(12),t.setTextColor(0);const i=a.filter(h=>h.type==="SORTIE").length,x=a.filter(h=>h.type==="RETOUR_VIDE").length,N=a.filter(h=>h.type==="RETOUR_CASSE").length,y=a.filter(h=>h.type==="RETOUR_REUTILISABLE").length;if(t.text(`Sorties: ${i}`,25,l),l+=7,t.text(`Retours vides: ${x}`,25,l),l+=7,t.text(`Retours casses: ${N}`,25,l),l+=7,t.text(`Futs non termines: ${y}`,25,l),l+=7,t.text(`Stock restant - Biere: ${oe} | Cidre: ${ie}`,25,l),l+=15,u.total.futsVides>0){l>200&&(t.addPage(),l=20),t.setFontSize(16),t.setTextColor(234,88,12),t.text("ANALYSE DES ECARTS (PERTES)",20,l),l+=10,t.setFontSize(11),t.setTextColor(0),t.text("Controle Volume:",25,l),l+=7,t.text(" Biere Cidre Total",25,l),l+=6,t.text(`Volume sorti: ${u.biere.volumeSorti.toFixed(0)}L ${u.cidre.volumeSorti.toFixed(0)}L ${u.total.volumeSorti.toFixed(0)}L`,25,l),l+=6,t.text(`Volume vendu: ${u.biere.volumeVendu.toFixed(1)}L ${u.cidre.volumeVendu.toFixed(1)}L ${u.total.volumeVendu.toFixed(1)}L`,25,l),l+=6,t.text(`Ecart: ${u.biere.ecartVolume.toFixed(1)}L ${u.cidre.ecartVolume.toFixed(1)}L ${u.total.ecartVolume.toFixed(1)}L`,25,l),l+=6;const h=C=>C==="ok"?"OK":C==="attention"?"ATTENTION":"ALERTE";t.text(`Taux perte: ${u.biere.tauxPerte.toFixed(1)}% ${h(u.biere.statutPerte)} ${u.cidre.tauxPerte.toFixed(1)}% ${h(u.cidre.statutPerte)} ${u.total.tauxPerte.toFixed(1)}%`,25,l),l+=10,t.text("Controle CA:",25,l),l+=7,t.text(`CA declare: ${u.biere.caDeclare.toFixed(0)}EUR ${u.cidre.caDeclare.toFixed(0)}EUR ${u.total.caDeclare.toFixed(0)}EUR`,25,l),l+=6,t.text(`CA theorique: ${u.biere.caTheorique.toFixed(0)}EUR ${u.cidre.caTheorique.toFixed(0)}EUR ${u.total.caTheorique.toFixed(0)}EUR`,25,l),l+=6,t.text(`Ecart CA: ${u.biere.ecartCa>=0?"+":""}${u.biere.ecartCa.toFixed(0)}EUR ${u.cidre.ecartCa>=0?"+":""}${u.cidre.ecartCa.toFixed(0)}EUR ${u.total.ecartCa>=0?"+":""}${u.total.ecartCa.toFixed(0)}EUR`,25,l),l+=10,u.total.manqueAGagner>0&&(t.setTextColor(220,38,38),t.text(`Manque a gagner estime: ~${u.total.manqueAGagner.toFixed(0)} EUR`,25,l),l+=10),t.setTextColor(0),t.text("Ecarts par bar:",25,l),l+=7,g.forEach(C=>{const I=C.statutPerte==="ok"?"(OK)":C.statutPerte==="attention"?"(!)":"(ALERTE)";t.text(` ${C.barNom}: ${C.tauxPerte.toFixed(1)}% ${I} - ${C.caDeclare.toFixed(0)}EUR`,25,l),l+=6}),l+=5}return r.length>0&&(l>240&&(t.addPage(),l=20),t.setFontSize(16),t.setTextColor(234,88,12),t.text("INCIDENTS SIGNALES",20,l),l+=10,t.setFontSize(11),t.setTextColor(0),r.forEach(h=>{t.text(`- ${h.barNom} - Equip. ${h.numEquipement||"N/A"}: ${h.commentaire||"Pas de detail"}`,25,l),l+=6})),t.setFontSize(9),t.setTextColor(128),t.text(`Genere le ${new Date().toLocaleString("fr-FR")} - Session ${p}`,105,285,{align:"center"}),t},Ha=async()=>{(await Bs()).save(`Bilan_J${d}_${new Date().toISOString().split("T")[0]}.pdf`),A("\u{1F4C4} PDF export\xE9")},za=async()=>{await window.loadXLSX();const e=Pe(),t=Se(),s=pt(),a=Yt(),r=[["HELLFEST 2026 - BILAN JOURNALIER"],[`Jour ${d} - ${new Date().toLocaleDateString("fr-FR")}`],[],["R\xC9SUM\xC9 DES VENTES"],["Total du jour",e.total.caDeclare.toFixed(2)+" \u20AC"],["Nombre de transactions",P.filter(b=>!b.annule&&b.jour===d).length],[],["F\xDBTS CONSOMM\xC9S"],["Bi\xE8re",e.biere.futsVides],["Cidre",e.cidre.futsVides],["Total",e.total.futsVides],[],["STOCK RESTANT"],["Bi\xE8re",oe],["Cidre",ie]],n=[["ANALYSE DES \xC9CARTS - VOLUMES"],[],["","Bi\xE8re","Cidre","Total"],["F\xFBts vides",e.biere.futsVides,e.cidre.futsVides,e.total.futsVides],["Volume sorti (L)",e.biere.volumeSorti,e.cidre.volumeSorti,e.total.volumeSorti],["Pintes vendues",e.biere.pintes,e.cidre.pintes,e.biere.pintes+e.cidre.pintes],["Pichets vendus",e.biere.pichets,e.cidre.pichets,e.biere.pichets+e.cidre.pichets],["Volume vendu (L)",e.biere.volumeVendu.toFixed(1),e.cidre.volumeVendu.toFixed(1),e.total.volumeVendu.toFixed(1)],["\xC9cart volume (L)",e.biere.ecartVolume.toFixed(1),e.cidre.ecartVolume.toFixed(1),e.total.ecartVolume.toFixed(1)],["Taux de perte (%)",e.biere.tauxPerte.toFixed(1),e.cidre.tauxPerte.toFixed(1),e.total.tauxPerte.toFixed(1)],[],["CONTR\xD4LE CA"],["CA d\xE9clar\xE9 (\u20AC)",e.biere.caDeclare.toFixed(2),e.cidre.caDeclare.toFixed(2),e.total.caDeclare.toFixed(2)],["CA th\xE9orique (\u20AC)",e.biere.caTheorique.toFixed(2),e.cidre.caTheorique.toFixed(2),e.total.caTheorique.toFixed(2)],["\xC9cart CA (\u20AC)",e.biere.ecartCa.toFixed(2),e.cidre.ecartCa.toFixed(2),e.total.ecartCa.toFixed(2)],["Manque \xE0 gagner (\u20AC)",e.biere.manqueAGagner.toFixed(2),e.cidre.manqueAGagner.toFixed(2),e.total.manqueAGagner.toFixed(2)]],u=[["\xC9CARTS PAR BAR"],[],["Bar","Type","F\xFBts","Vol. sorti (L)","Vol. vendu (L)","\xC9cart (L)","Taux perte (%)","CA (\u20AC)","CA/f\xFBt (\u20AC)"],...t.map(b=>[b.barNom,b.type,b.futsVides,b.volumeSorti,b.volumeVendu.toFixed(1),b.ecartVolume.toFixed(1),b.tauxPerte.toFixed(1),b.caDeclare.toFixed(2),b.ratioParFut.toFixed(2)])],l=[["VENTES PAR CR\xC9NEAU"],[],["Cr\xE9neau","Pintes","Pichets","Gobelets","CA d\xE9clar\xE9 (\u20AC)","CA th\xE9orique (\u20AC)","\xC9cart (\u20AC)"],...s.map(b=>[b.creneauLabel,b.pintes,b.pichets,b.gobelets,b.caDeclare.toFixed(2),b.caTheorique.toFixed(2),b.ecartCa.toFixed(2)])],f=["",...a.jours.map(b=>`J${b.jour}`)],i=[["COMPARATIF FESTIVAL"],[],f,["CA (\u20AC)",...a.jours.map(b=>b.hasDonnees?b.ca.toFixed(2):"-")],["F\xFBts bi\xE8re",...a.jours.map(b=>b.hasDonnees?b.futsBiere:"-")],["F\xFBts cidre",...a.jours.map(b=>b.hasDonnees?b.futsCidre:"-")],["Taux perte (%)",...a.jours.map(b=>b.hasDonnees?b.tauxPerte.toFixed(1):"-")],["Top bar",...a.jours.map(b=>b.hasDonnees?b.topBar:"-")],[],["TOTAUX"],["CA Total",a.caTotal.toFixed(2)+" \u20AC"],["F\xFBts Total",a.futsTotal]],x=["Date/Heure","Bar","Cr\xE9neau","Pintes","Pichets","Gobelets","Montant (\u20AC)","\xC9quip. d\xE9faillant","Commentaire"],N=P.filter(b=>!b.annule&&b.jour===d),y=[["HISTORIQUE DES VENTES - JOUR "+d],[],x,...N.map(b=>{var L;return[new Date(b.timestamp).toLocaleString("fr-FR"),b.barNom||"-",((L=D.find(H=>H.id===b.creneau))==null?void 0:L.label)||"-",b.nbPintes||0,b.nbPichets||0,b.nbGobelets||0,(b.montant||0).toFixed(2),b.equipementDefaillant?"Oui":"Non",b.commentaire||""]})],h=XLSX.utils.book_new(),C=XLSX.utils.aoa_to_sheet(r),I=XLSX.utils.aoa_to_sheet(n),B=XLSX.utils.aoa_to_sheet(u),Q=XLSX.utils.aoa_to_sheet(l),ae=XLSX.utils.aoa_to_sheet(i),W=XLSX.utils.aoa_to_sheet(y);XLSX.utils.book_append_sheet(h,C,"R\xE9sum\xE9"),XLSX.utils.book_append_sheet(h,I,"Analyse \xC9carts"),XLSX.utils.book_append_sheet(h,B,"\xC9carts par Bar"),XLSX.utils.book_append_sheet(h,Q,"Ventes par Cr\xE9neau"),XLSX.utils.book_append_sheet(h,ae,"Comparatif Festival"),XLSX.utils.book_append_sheet(h,W,"Historique Ventes"),XLSX.writeFile(h,`Hellfest_J${d}_${new Date().toISOString().split("T")[0]}.xlsx`),A("\u{1F4CA} Excel export\xE9")};return p?React.createElement("div",{className:"min-h-screen bg-black text-white"},Lt&&React.createElement("div",{className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] px-6 py-3 rounded-xl shadow-lg animate-pulse ${Lt.type==="error"?"bg-red-600":"bg-green-600"}`},React.createElement("p",{className:"font-medium text-white"},Lt.message)),gs.length>0&&React.createElement("div",{className:"bg-blue-900 border-b border-blue-700"},gs.slice(0,1).map(e=>React.createElement("div",{key:e.id,className:"px-4 py-2 flex items-center justify-between"},React.createElement("div",{className:"flex items-center gap-2 flex-1"},React.createElement("span",{className:"text-xl"},"\u{1F4E2}"),React.createElement("div",{className:"flex-1"},React.createElement("p",{className:"text-sm font-medium"},e.message),React.createElement("p",{className:"text-xs text-blue-300"},e.user," \u2022 ",new Date(e.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})))),_&&React.createElement("button",{onClick:()=>Ua(e.id),className:"text-blue-300 hover:text-white px-2"},"\u2715")))),(!ne||ve.length>0)&&React.createElement("div",{className:`px-4 py-2 text-center text-sm ${ne?"bg-amber-900":"bg-red-900"}`},ne?React.createElement("span",null,"\u23F3 Synchronisation de ",ve.length," action(s) en attente..."):React.createElement("span",null,"\u26A0\uFE0F Mode hors-ligne - Les actions seront synchronis\xE9es au retour du r\xE9seau")),React.createElement("div",{className:"bg-neutral-900 border-b border-red-900 p-3"},React.createElement("div",{className:"flex items-center justify-between mb-2"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("img",{src:"logo-hellfest.png",alt:"Hellfest",className:"w-10 h-10"}),React.createElement("div",null,React.createElement("h1",{className:"font-bold text-green-400"},"HELLFEST 2026"),React.createElement("p",{className:"text-xs text-neutral-400"},"Gestion des F\xFBts"))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:`w-2 h-2 rounded-full ${ne?"bg-green-500":"bg-red-500"}`}),React.createElement("button",{onClick:()=>We(!0),className:"text-xs bg-neutral-800 px-2 py-1 rounded"},p))),React.createElement("div",{className:"flex items-center justify-between gap-2 mb-3"},React.createElement("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg ${T?"bg-red-900":"bg-neutral-800"}`},React.createElement("span",{className:"text-sm"},"Jour"),React.createElement("button",{onClick:()=>Oe("jour_prev"),disabled:T&&d<=1,className:"w-8 h-8 bg-neutral-700 rounded disabled:opacity-50"},"\u25C0"),React.createElement("span",{className:"text-xl font-bold w-8 text-center"},d),React.createElement("button",{onClick:()=>Oe("jour_next"),disabled:T&&d>=c.nombreJours,className:"w-8 h-8 bg-neutral-700 rounded disabled:opacity-50"},"\u25B6"),React.createElement("span",{className:"text-xs text-neutral-400"},"/",c.nombreJours)),React.createElement("button",{onClick:()=>T?ge(!1):Oe("parametres"),className:`px-3 py-2 rounded-lg text-sm font-medium ${T?"bg-green-600":"bg-neutral-800"}`},T?"\u{1F513} Admin":"\u{1F512} Admin")),React.createElement("div",{className:"flex flex-wrap gap-2"},React.createElement("button",{onClick:Ia,className:"flex-1 py-2 bg-indigo-600 rounded-lg text-sm font-medium flex items-center justify-center gap-1"},"\u{1F465} B\xE9n\xE9voles ",de>0&&React.createElement("span",{className:"bg-white/20 px-1.5 rounded"},de)),React.createElement("button",{onClick:()=>Qe(!0),className:"flex-1 py-2 bg-emerald-600 rounded-lg text-sm font-medium"},"\u{1F4B0} Ventes"),T&&React.createElement(React.Fragment,null,React.createElement("button",{onClick:()=>ms(!0),className:"py-2 px-3 bg-amber-600 rounded-lg text-sm font-medium"},"\u{1F4C8} Stats"),React.createElement("button",{onClick:()=>ye(!j),className:`py-2 px-3 rounded-lg text-sm ${j?"bg-teal-500":"bg-teal-700"}`},"\u{1F4CA} ",P.length),React.createElement("button",{onClick:()=>z(!V),className:`py-2 px-3 rounded-lg text-sm ${V?"bg-purple-500":"bg-purple-700"}`},"\u{1F4CB} ",F.length)),_&&React.createElement("button",{onClick:()=>Ns(!Mt),className:`py-2 px-3 rounded-lg text-sm ${Mt?"bg-blue-500":"bg-blue-700"}`},"\u{1F4E2}"),React.createElement("button",{onClick:()=>Oe("export"),className:"py-2 px-3 bg-green-700 rounded-lg text-sm"},"\u{1F4E5}"),React.createElement("button",{onClick:()=>Oe("parametres"),className:"py-2 px-3 bg-neutral-700 rounded-lg text-sm"},"\u2699\uFE0F")),Mt&&_&&React.createElement("div",{className:"mt-2 flex gap-2"},React.createElement("input",{type:"text",value:tt,onChange:e=>hs(e.target.value),placeholder:"Votre message \xE0 tous...",className:"flex-1 px-3 py-2 bg-neutral-800 rounded-lg text-sm",onKeyDown:e=>e.key==="Enter"&&Vs()}),React.createElement("button",{onClick:Vs,disabled:!tt.trim(),className:"px-4 py-2 bg-blue-600 rounded-lg text-sm disabled:opacity-50"},"\u{1F4E2} Envoyer"))),React.createElement("div",{className:`grid ${T?"grid-cols-5":"grid-cols-3"} gap-1 p-2 bg-neutral-900`},T&&React.createElement("div",{className:"bg-amber-900/50 p-2 rounded text-center"},React.createElement("div",{className:"text-lg font-bold text-amber-400"},oe),React.createElement("div",{className:"text-xs text-amber-200"},"\u{1F37A} Bi\xE8re")),T&&React.createElement("div",{className:"bg-orange-900/50 p-2 rounded text-center"},React.createElement("div",{className:"text-lg font-bold text-orange-400"},ie),React.createElement("div",{className:"text-xs text-orange-200"},"\u{1F34E} Cidre")),React.createElement("div",{className:"bg-blue-900/50 p-2 rounded text-center"},React.createElement("div",{className:"text-lg font-bold text-blue-400"},fa),React.createElement("div",{className:"text-xs text-blue-200"},"Vides")),React.createElement("div",{className:"bg-red-900/50 p-2 rounded text-center"},React.createElement("div",{className:"text-lg font-bold text-red-400"},ga),React.createElement("div",{className:"text-xs text-red-200"},"Cass\xE9")),React.createElement("div",{className:"bg-purple-900/50 p-2 rounded text-center"},React.createElement("div",{className:"text-lg font-bold text-purple-400"},va),React.createElement("div",{className:"text-xs text-purple-200"},"R\xE9util."))),ce.filter(e=>e.jourOrigine===d).length>0&&React.createElement("div",{className:"mx-2 mt-2 p-3 bg-purple-900/30 rounded-lg border border-purple-700 flex items-center justify-between"},React.createElement("span",{className:"text-purple-300"},"\u267B\uFE0F F\xFBts non termin\xE9s aujourd'hui"),React.createElement("span",{className:"text-lg font-bold text-purple-400"},ce.filter(e=>e.jourOrigine===d).length)),ce.filter(e=>e.jourOrigine<d).length>0&&React.createElement("div",{className:"mx-2 mt-2 bg-purple-900/50 rounded-xl border-2 border-purple-500 overflow-hidden"},React.createElement("div",{className:"bg-purple-800 px-3 py-2"},React.createElement("span",{className:"font-bold text-purple-100"},"\u26A0\uFE0F F\xFBts \xE0 reprendre en PRIORIT\xC9 (",ce.filter(e=>e.jourOrigine<d).length,")")),React.createElement("div",{className:"p-2 space-y-2"},ce.filter(e=>e.jourOrigine<d).map(e=>React.createElement("div",{key:e.id,className:"bg-purple-900/30 rounded-lg p-3 flex items-center justify-between"},React.createElement("div",null,React.createElement("span",{className:"font-medium"},e.typeFut==="biere"?"\u{1F37A}":"\u{1F34E}"," Non termin\xE9 du J",e.jourOrigine),React.createElement("p",{className:"text-xs text-purple-300"},"Venant de : ",e.barNom)),React.createElement("select",{onChange:t=>{t.target.value&&(Fa(e.id,t.target.value),t.target.value="")},className:"px-3 py-2 bg-purple-700 rounded-lg text-sm"},React.createElement("option",{value:""},"Attribuer \xE0..."),w.filter(t=>{var s;return t.type===e.typeFut&&(((s=t.futs)==null?void 0:s.length)||0)<c.maxFutsParBar}).map(t=>React.createElement("option",{key:t.id,value:t.id},t.nom))))))),Ss>0&&React.createElement("div",{className:"mx-2 mt-2 p-3 bg-emerald-900/50 rounded-lg flex items-center justify-between"},React.createElement("span",{className:"text-emerald-300"},"\u{1F4B0} Total Ventes"),React.createElement("span",{className:"text-xl font-bold text-emerald-400"},Ss.toFixed(2)," \u20AC")),T&&j&&React.createElement("div",{className:"mx-2 mt-2 bg-teal-900/30 rounded-xl border border-teal-700 overflow-hidden"},React.createElement("div",{className:"bg-teal-900/50 px-3 py-2 flex items-center justify-between"},React.createElement("span",{className:"font-bold text-teal-300"},"\u{1F4CA} Historique Ventes (",Qt.length,"/",P.length,")"),React.createElement("button",{onClick:()=>ye(!1),className:"text-teal-400"},"\u2715")),React.createElement("div",{className:"px-3 py-2 bg-teal-900/30 border-b border-teal-800 flex flex-wrap gap-2"},React.createElement("select",{value:qt,onChange:e=>ta(e.target.value),className:"px-2 py-1 bg-teal-800 rounded text-sm"},React.createElement("option",{value:"tous"},"Tous les jours"),Array.from({length:c.nombreJours},(e,t)=>React.createElement("option",{key:t+1,value:t+1},"J",t+1," (",P.filter(s=>s.jour===t+1).length,")"))),React.createElement("input",{type:"text",value:Jt,onChange:e=>aa(e.target.value),placeholder:"\u{1F50D} Rechercher...",className:"flex-1 px-2 py-1 bg-teal-800 rounded text-sm min-w-[120px]"})),React.createElement("div",{className:"max-h-64 overflow-y-auto"},Qt.length===0?React.createElement("p",{className:"text-neutral-500 text-sm text-center py-4"},"Aucune vente"):Qt.map(e=>React.createElement("div",{key:e.id,className:`px-3 py-2 border-b border-teal-800 last:border-0 ${e.annule?"opacity-50 bg-red-900/20":""}`},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",{className:`font-medium ${e.annule?"line-through text-red-400":"text-teal-300"}`},(e.montant||0).toFixed(2)," \u20AC"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:`text-xs px-1.5 py-0.5 rounded ${Ps(e.barId)}`},e.barNom),!e.annule&&React.createElement("button",{onClick:()=>Ra(e.id),className:"text-xs text-red-400 hover:text-red-300 px-1",title:"Annuler cette vente"},"\u2715"))),React.createElement("div",{className:"flex items-center justify-between text-xs text-neutral-500"},React.createElement("span",{className:e.annule?"line-through":""},"\u{1F37A}",e.nbPintes||0," \u{1F376}",e.nbPichets||0," \u{1F964}",e.nbGobelets||0),React.createElement("span",null,"J",e.jour," \u2022 ",new Date(e.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})," \u2022 ",e.user)),e.annule&&React.createElement("div",{className:"mt-1 text-xs text-red-400"},"\u274C Annul\xE9 par ",e.annulePar," le ",new Date(e.annuleLe).toLocaleString("fr-FR")),!e.annule&&e.equipementDefaillant&&React.createElement("div",{className:"mt-1 text-xs text-orange-400 bg-orange-900/30 px-2 py-1 rounded"},"\u26A0\uFE0F \xC9quip. d\xE9faillant",e.numEquipement?` - N\xB0${e.numEquipement}`:"",e.donneesPartielles?" (donn\xE9es partielles)":""))))),T&&V&&React.createElement("div",{className:"mx-2 mt-2 bg-purple-900/30 rounded-xl border border-purple-700 overflow-hidden"},React.createElement("div",{className:"bg-purple-900/50 px-3 py-2 flex items-center justify-between"},React.createElement("span",{className:"font-bold text-purple-300"},"\u{1F4CB} Historique F\xFBts (",Kt.length,"/",F.length,")"),React.createElement("button",{onClick:()=>z(!1),className:"text-purple-400"},"\u2715")),React.createElement("div",{className:"px-3 py-2 bg-purple-900/30 border-b border-purple-800 flex flex-wrap gap-2"},React.createElement("select",{value:Ot,onChange:e=>ea(e.target.value),className:"px-2 py-1 bg-purple-800 rounded text-sm"},React.createElement("option",{value:"tous"},"Tous les jours"),Array.from({length:c.nombreJours},(e,t)=>React.createElement("option",{key:t+1,value:t+1},"J",t+1," (",F.filter(s=>s.jour===t+1).length,")"))),React.createElement("input",{type:"text",value:_t,onChange:e=>sa(e.target.value),placeholder:"\u{1F50D} Rechercher...",className:"flex-1 px-2 py-1 bg-purple-800 rounded text-sm min-w-[120px]"})),React.createElement("div",{className:"max-h-64 overflow-y-auto"},Kt.length===0?React.createElement("p",{className:"text-neutral-500 text-sm text-center py-4"},"Aucun mouvement"):Kt.map(e=>{const s={SORTIE:{icon:"\u{1F4E4}",label:"Sortie",color:"text-green-400"},RETOUR_VIDE:{icon:"\u{1F4E6}",label:"Vide",color:"text-blue-400"},RETOUR_CASSE:{icon:"\u{1F4A5}",label:"Cass\xE9",color:"text-red-400"},RETOUR_REUTILISABLE:{icon:"\u267B\uFE0F",label:"Non termin\xE9",color:"text-purple-400"},RETOUR_PLEIN:{icon:"\u{1F504}",label:"Plein (r\xE9int\xE9gr\xE9)",color:"text-green-400"},REPRISE:{icon:"\u{1F504}",label:"Reprise",color:"text-cyan-400"}}[e.type]||{icon:"\u2022",label:e.type,color:"text-neutral-400"};return React.createElement("div",{key:e.id,className:`px-3 py-2 border-b border-purple-800 last:border-0 ${e.annule?"opacity-50 bg-red-900/20":""}`},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",{className:`font-medium ${e.annule?"line-through text-red-400":s.color}`},s.icon," ",s.label),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:`text-xs px-1.5 py-0.5 rounded ${Ps(e.barId)}`},e.barNom),!e.annule&&React.createElement("button",{onClick:()=>Ta(e.id),className:"text-xs text-red-400 hover:text-red-300 px-1",title:"Annuler ce mouvement"},"\u2715"))),React.createElement("div",{className:"flex items-center justify-between text-xs text-neutral-500"},React.createElement("span",{className:e.annule?"line-through":""},e.typeFut==="biere"?"\u{1F37A}":"\u{1F34E}"," ",e.user),React.createElement("span",null,"J",e.jour," \u2022 ",new Date(e.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}))),e.commentaire&&!e.annule&&React.createElement("div",{className:"mt-1 text-xs text-yellow-400 bg-yellow-900/30 px-2 py-1 rounded"},"\u{1F4AC} ",e.commentaire),e.annule&&React.createElement("div",{className:"mt-1 text-xs text-red-400"},"\u274C Annul\xE9 par ",e.annulePar," le ",new Date(e.annuleLe).toLocaleString("fr-FR")))}))),React.createElement("div",{className:"p-2 space-y-2 pb-24"},w.length===0?React.createElement("div",{className:"text-center py-8 text-neutral-500"},React.createElement("p",null,"Aucun bar nomade configur\xE9"),React.createElement("p",{className:"text-sm"},"Allez dans \u2699\uFE0F Param\xE8tres pour en ajouter")):w.map(e=>{const t=e.type==="biere",s=e.futs||[],a=s.length<c.maxFutsParBar&&(t?oe>0:ie>0),r=s.length>=c.maxFutsParBar,n=s.length/c.maxFutsParBar*100,o=r?"bg-red-500":s.length>=c.maxFutsParBar-1?"bg-yellow-500":"bg-green-500";return React.createElement("div",{key:e.id,className:`rounded-xl border-2 overflow-hidden ${r?"border-red-600 bg-red-950/20":t?"border-emerald-600 bg-emerald-950/30":"border-teal-600 bg-teal-950/30"}`},React.createElement("div",{className:`px-3 py-2 flex items-center justify-between ${r?"bg-red-900/50":t?"bg-emerald-900/50":"bg-teal-900/50"}`},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"text-xl"},t?"\u{1F37A}":"\u{1F34E}"),React.createElement("span",{className:"font-bold text-lg"},e.nom)),r&&React.createElement("span",{className:"px-3 py-1 bg-red-600 rounded-full text-xs font-bold"},"COMPLET")),React.createElement("div",{className:"px-3 py-3 border-b border-white/10"},React.createElement("div",{className:"flex items-center justify-center gap-1 mb-2"},Array.from({length:c.maxFutsParBar}).map((u,g)=>React.createElement("span",{key:g,className:`text-2xl ${g<s.length?"":"opacity-30 grayscale"}`},"\u{1F6E2}\uFE0F"))),React.createElement("div",{className:"text-center"},React.createElement("span",{className:`text-4xl font-black ${r?"text-red-400":s.length>0?"text-yellow-400":"text-green-400"}`},s.length),React.createElement("span",{className:"text-2xl text-neutral-400"},"/",c.maxFutsParBar),React.createElement("p",{className:"text-xs text-neutral-500 mt-1"},r?"\u26D4 Maximum atteint":s.length===0?"\u2705 Disponible":`\u26A0\uFE0F ${c.maxFutsParBar-s.length} place(s) restante(s)`)),React.createElement("div",{className:"mt-2 h-3 bg-neutral-700 rounded-full overflow-hidden"},React.createElement("div",{className:`h-full ${o} transition-all duration-300`,style:{width:`${n}%`}}))),React.createElement("div",{className:"p-3 space-y-2"},s.length===0?React.createElement("p",{className:"text-neutral-500 text-sm text-center py-2"},"Aucun f\xFBt attribu\xE9"):s.map((u,g)=>{const l=u.dateAttribution?Fs(u.dateAttribution):"bg-neutral-700",f=u.dateAttribution?new Date(u.dateAttribution):null,i=f?`${f.getDate().toString().padStart(2,"0")}/${(f.getMonth()+1).toString().padStart(2,"0")}`:"",x=f?`${f.getHours().toString().padStart(2,"0")}:${f.getMinutes().toString().padStart(2,"0")}`:"";return React.createElement("div",{key:u.id||g,className:`flex items-center justify-between p-2 rounded-lg ${l}`},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"text-sm"},t?"\u{1F37A}":"\u{1F34E}"," F\xFBt ",g+1),f&&React.createElement("span",{className:"text-xs opacity-75"},"\u2022 ",i," ",x)),React.createElement("button",{onClick:()=>Nt({barId:e.id,futIndex:g,barNom:e.nom}),className:"px-3 py-1 bg-black/30 hover:bg-black/50 rounded text-sm"},"\u21A9\uFE0F Retour"))})))})),vt&&React.createElement("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-neutral-900 rounded-2xl w-full max-w-sm p-6"},React.createElement("h3",{className:"text-xl font-bold mb-4"},"\u{1F510} Acc\xE8s Admin"),React.createElement("input",{type:"password",autoFocus:!0,value:Te,onChange:e=>He(e.target.value),placeholder:"Mot de passe",className:"w-full px-4 py-3 bg-neutral-800 rounded-lg mb-4",onKeyDown:e=>{e.key==="Enter"&&ks()}}),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{type:"button",onClick:()=>Re(!1),className:"flex-1 py-3 bg-neutral-700 rounded-lg"},"Annuler"),React.createElement("button",{type:"button",onClick:()=>ks(),className:"flex-1 py-3 bg-red-600 rounded-lg font-medium"},"Valider")))),te&&React.createElement("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-neutral-900 rounded-2xl w-full max-w-sm p-6"},React.createElement("h3",{className:"text-xl font-bold mb-4"},"\u21A9\uFE0F Retour de F\xFBt"),React.createElement("p",{className:"text-neutral-400 mb-4"},te.barNom),ts==="choix"&&React.createElement("div",{className:"space-y-2"},React.createElement("button",{onClick:()=>dt(te.barId,te.futIndex,"RETOUR_VIDE"),className:"w-full py-3 bg-blue-600 rounded-lg"},"\u{1F4E6} F\xFBt Vide"),React.createElement("button",{onClick:()=>{ht("RETOUR_CASSE"),Xe("commentaire")},className:"w-full py-3 bg-red-600 rounded-lg"},"\u{1F4A5} F\xFBt Cass\xE9 / Endommag\xE9"),React.createElement("button",{onClick:()=>dt(te.barId,te.futIndex,"RETOUR_REUTILISABLE"),className:"w-full py-3 bg-purple-600 rounded-lg"},"\u267B\uFE0F Non Termin\xE9 (reprendre demain)"),React.createElement("button",{onClick:()=>dt(te.barId,te.futIndex,"RETOUR_PLEIN"),className:"w-full py-3 bg-green-600 rounded-lg"},"\u{1F504} F\xFBt Plein (non utilis\xE9)"),React.createElement("button",{onClick:()=>{Nt(null),Xe("choix"),ht(""),Ke("")},className:"w-full py-3 bg-neutral-700 rounded-lg mt-4"},"Annuler")),ts==="commentaire"&&React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"bg-red-900/30 border border-red-700 rounded-lg p-3"},React.createElement("p",{className:"text-red-400 text-sm"},"\u26A0\uFE0F Commentaire obligatoire pour un f\xFBt cass\xE9/endommag\xE9")),React.createElement("div",null,React.createElement("label",{className:"block text-sm text-neutral-400 mb-1"},"D\xE9crivez le probl\xE8me *"),React.createElement("textarea",{value:yt,onChange:e=>Ke(e.target.value),className:"w-full px-4 py-2 bg-neutral-800 rounded-lg",rows:"3",placeholder:"Ex: F\xFBt perc\xE9, valve cass\xE9e, chute...",autoFocus:!0})),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>{Xe("choix"),Ke("")},className:"flex-1 py-3 bg-neutral-700 rounded-lg"},"Retour"),React.createElement("button",{onClick:()=>{if(!yt.trim()){alert("Le commentaire est obligatoire pour un f\xFBt cass\xE9");return}dt(te.barId,te.futIndex,Gs,yt)},className:"flex-1 py-3 bg-red-600 rounded-lg font-medium"},"Confirmer"))))),Xs&&React.createElement("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-neutral-900 rounded-2xl w-full max-w-sm p-6 max-h-[90vh] overflow-y-auto"},React.createElement("h3",{className:"text-xl font-bold mb-4"},"\u{1F4B0} Saisie Vente"),(()=>{var g,l,f;const e=(i,x)=>{const N=`J${d}_${i}_${x}`;return os[N]?!0:P.some(y=>!y.annule&&y.jour===d&&y.barId===i&&y.creneau===x)},t=(i,x)=>{const N=`J${d}_${i}_${x}`;return!!os[N]},s=(i,x)=>t(i,x)?!1:P.some(N=>!N.annule&&N.jour===d&&N.barId===i&&N.creneau===x),a=(i,x)=>P.filter(N=>!N.annule&&N.jour===d&&N.barId===i&&N.creneau===x),n=(()=>{for(const i of D)if(!w.every(N=>e(N.id,i.id)))return i;return null})(),o=[];D.forEach(i=>{w.forEach(x=>{if(s(x.id,i.id)){const N=a(x.id,i.id);o.push({barId:x.id,barNom:x.nom,barType:x.type,creneauId:i.id,creneauLabel:i.label,nbVentes:N.length,totalMontant:N.reduce((y,h)=>y+(h.montant||0),0)})}})});const u=n?w.filter(i=>!t(i.id,n.id)):[];return React.createElement("div",{className:"space-y-4"},o.length>0&&React.createElement("div",{className:"bg-orange-900/30 border border-orange-600 rounded-xl p-3"},React.createElement("p",{className:"text-xs text-orange-400 font-bold mb-2"},"\u26A0\uFE0F Saisie(s) partielle(s) - PAD remplac\xE9 :"),React.createElement("div",{className:"space-y-2 max-h-40 overflow-y-auto"},o.map((i,x)=>React.createElement("div",{key:x,className:"bg-neutral-800 rounded-lg p-2"},React.createElement("div",{className:"flex items-center justify-between mb-1"},React.createElement("span",{className:"text-sm text-orange-300"},i.barType==="biere"?"\u{1F37A}":"\u{1F34E}"," ",i.barNom," - ",i.creneauLabel),React.createElement("span",{className:"text-xs text-neutral-500"},i.nbVentes," PAD \u2022 ",i.totalMontant.toFixed(2),"\u20AC")),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>{De(i.barId),Ve(i.creneauId)},className:"flex-1 py-2 bg-blue-600 hover:bg-blue-500 rounded text-xs font-medium"},"\u2795 Ajouter donn\xE9es PAD"),React.createElement("button",{onClick:async()=>{if(!confirm(`Cl\xF4turer d\xE9finitivement ${i.barNom} - ${i.creneauLabel} ?

Total actuel : ${i.totalMontant.toFixed(2)}\u20AC (${i.nbVentes} PAD)`))return;const N=`J${d}_${i.barId}_${i.creneauId}`;await v.ref(`sessions/${p}/creneauxUtilises/${N}`).set({barId:i.barId,creneau:i.creneauId,jour:d,timestamp:Date.now(),user:k}),A(`\u2705 ${i.barNom} - ${i.creneauLabel} cl\xF4tur\xE9`)},className:"py-2 px-3 bg-green-600 hover:bg-green-500 rounded text-xs font-medium"},"\u{1F512} Cl\xF4turer")))))),n?React.createElement("div",{className:"bg-blue-900/30 border border-blue-600 rounded-xl p-3 text-center"},React.createElement("p",{className:"text-xs text-neutral-400"},"Cr\xE9neau en cours :"),React.createElement("p",{className:"text-2xl font-bold text-blue-400"},n.label),React.createElement("p",{className:"text-xs text-neutral-500 mt-1"},u.length," bar(s) \xE0 saisir")):React.createElement("div",{className:"bg-green-900/30 border border-green-600 rounded-xl p-4 text-center"},React.createElement("p",{className:"text-3xl mb-2"},"\u{1F389}"),React.createElement("p",{className:"text-green-400 font-bold"},"Tous les cr\xE9neaux trait\xE9s !"),o.length>0&&React.createElement("p",{className:"text-xs text-orange-400 mt-1"},"\u26A0\uFE0F ",o.length," cr\xE9neau(x) avec saisies partielles ci-dessus")),n&&!X&&React.createElement("div",null,React.createElement("label",{className:"block text-sm text-neutral-400 mb-1"},"S\xE9lectionner un bar :"),React.createElement("div",{className:"grid grid-cols-2 gap-2"},w.map(i=>{const x=t(i.id,n.id),N=s(i.id,n.id),y=a(i.id,n.id);return React.createElement("button",{key:i.id,onClick:()=>{x||(De(i.id),Ve(n.id))},disabled:x,className:`p-3 rounded-lg text-left text-sm ${x?"bg-green-900/30 text-green-400 cursor-not-allowed":N?"bg-orange-900/30 border border-orange-500 text-orange-300 hover:bg-orange-900/50":"bg-neutral-800 hover:bg-neutral-700"}`},React.createElement("span",null,i.type==="biere"?"\u{1F37A}":"\u{1F34E}"," ",i.nom),x&&React.createElement("span",{className:"block text-xs mt-1"},"\u2705 Cl\xF4tur\xE9"),N&&React.createElement("span",{className:"block text-xs mt-1"},"\u26A0\uFE0F ",y.length," PAD"))}))),X&&le&&React.createElement("div",{className:"bg-neutral-800/50 rounded-xl p-4 border border-blue-500/30"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("div",null,React.createElement("p",{className:"font-bold text-blue-400"},((g=w.find(i=>i.id===X))==null?void 0:g.type)==="biere"?"\u{1F37A}":"\u{1F34E}"," ",(l=w.find(i=>i.id===X))==null?void 0:l.nom),React.createElement("p",{className:"text-sm text-neutral-400"},(f=D.find(i=>i.id===le))==null?void 0:f.label)),React.createElement("button",{onClick:()=>{De(""),Ve("")},className:"text-neutral-400 hover:text-white px-2 py-1"},"\u2715 Changer")),(()=>{const i=a(X,le);return i.length>0?React.createElement("div",{className:"bg-orange-900/20 border border-orange-600/50 rounded-lg p-2 mb-4"},React.createElement("p",{className:"text-xs text-orange-400 mb-1"},"Saisies existantes (",i.length,") :"),React.createElement("div",{className:"space-y-1"},i.map((x,N)=>{var y;return React.createElement("div",{key:N,className:"text-xs text-neutral-400 flex justify-between"},React.createElement("span",null,"PAD ",x.numEquipement||"#"+(N+1)," ",x.equipementDefaillant?"\u26A0\uFE0F":""),React.createElement("span",null,(y=x.montant)==null?void 0:y.toFixed(2),"\u20AC"))}),React.createElement("div",{className:"border-t border-orange-600/30 pt-1 mt-1 text-xs font-bold text-orange-300 flex justify-between"},React.createElement("span",null,"Total"),React.createElement("span",null,i.reduce((x,N)=>x+(N.montant||0),0).toFixed(2),"\u20AC")))):null})(),React.createElement("div",{className:"space-y-3"},React.createElement("div",null,React.createElement("label",{className:"block text-sm text-neutral-400 mb-1"},"Montant (\u20AC) ",React.createElement("span",{className:"text-red-400"},"*")),React.createElement("input",{type:"number",step:"0.01",value:as,onChange:i=>Ft(i.target.value),className:"w-full px-4 py-3 bg-neutral-800 rounded-lg text-xl",placeholder:"0.00"})),React.createElement("div",{className:"grid grid-cols-3 gap-2"},React.createElement("div",null,React.createElement("label",{className:"block text-xs text-neutral-400 mb-1"},"Pintes *"),React.createElement("input",{type:"number",min:"0",value:$t,onChange:i=>Pt(i.target.value),className:"w-full px-2 py-2 bg-neutral-800 rounded-lg text-center",placeholder:"0"})),React.createElement("div",null,React.createElement("label",{className:"block text-xs text-neutral-400 mb-1"},"Pichets *"),React.createElement("input",{type:"number",min:"0",value:St,onChange:i=>kt(i.target.value),className:"w-full px-2 py-2 bg-neutral-800 rounded-lg text-center",placeholder:"0"})),React.createElement("div",null,React.createElement("label",{className:"block text-xs text-neutral-400 mb-1"},"Gobelets *"),React.createElement("input",{type:"number",min:"0",value:At,onChange:i=>Et(i.target.value),className:"w-full px-2 py-2 bg-neutral-800 rounded-lg text-center",placeholder:"0"}))),React.createElement("div",{className:"flex items-center gap-3"},React.createElement("input",{type:"checkbox",checked:Fe,onChange:i=>Tt(i.target.checked),className:"w-5 h-5 rounded accent-orange-500"}),React.createElement("span",{className:"text-orange-400 font-medium text-sm"},"\u26A0\uFE0F PAD d\xE9faillant (remplac\xE9)")),Fe&&React.createElement("div",{className:"bg-orange-900/20 border border-orange-500/30 rounded-lg p-3 space-y-2"},React.createElement("p",{className:"text-xs text-orange-300"},"Le cr\xE9neau restera ouvert pour ajouter les donn\xE9es du nouveau PAD"),React.createElement("input",{type:"text",value:rs,onChange:i=>It(i.target.value),placeholder:"N\xB0 PAD d\xE9faillant",className:"w-full px-3 py-2 bg-neutral-800 rounded-lg text-sm"}),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:ls,onChange:i=>jt(i.target.checked),className:"w-4 h-4"}),React.createElement("span",{className:"text-orange-400 text-xs"},"Donn\xE9es partielles"))),React.createElement("div",null,React.createElement("label",{className:"block text-xs text-neutral-400 mb-1"},"Commentaire"),React.createElement("textarea",{value:ns,onChange:i=>Rt(i.target.value),className:"w-full px-3 py-2 bg-neutral-800 rounded-lg text-sm",rows:"2"})))))})(),React.createElement("div",{className:"flex gap-2 mt-6"},React.createElement("button",{onClick:()=>{Qe(!1),De(""),Ve(""),Ft(""),Pt(""),kt(""),Et(""),Tt(!1),It(""),jt(!1),Rt("")},className:"flex-1 py-3 bg-neutral-700 rounded-lg"},"Annuler"),React.createElement("button",{onClick:$a,disabled:K||!X||!le,className:"flex-1 py-3 bg-emerald-600 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed"},K?"\u23F3...":"\u2713 Enregistrer")))),$&&React.createElement("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-neutral-900 rounded-2xl w-full max-w-md p-6 max-h-[90vh] overflow-y-auto"},React.createElement("h3",{className:"text-xl font-bold mb-4"},"\u2699\uFE0F Param\xE8tres"),React.createElement("div",{className:"space-y-4"},React.createElement("div",null,React.createElement("label",{className:"block text-sm text-neutral-400 mb-1"},"Stock initial Bi\xE8re"),React.createElement("input",{type:"number",defaultValue:c.stockInitialBiere,id:"stockBiere",className:"w-full px-4 py-2 bg-neutral-800 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm text-neutral-400 mb-1"},"Stock initial Cidre"),React.createElement("input",{type:"number",defaultValue:c.stockInitialCidre,id:"stockCidre",className:"w-full px-4 py-2 bg-neutral-800 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm text-neutral-400 mb-1"},"Max f\xFBts par bar"),React.createElement("input",{type:"number",defaultValue:c.maxFutsParBar,id:"maxFuts",className:"w-full px-4 py-2 bg-neutral-800 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm text-neutral-400 mb-1"},"Nombre de jours"),React.createElement("input",{type:"number",defaultValue:c.nombreJours,id:"nbJours",className:"w-full px-4 py-2 bg-neutral-800 rounded-lg"})),React.createElement("hr",{className:"border-neutral-700"}),React.createElement("div",null,React.createElement("h4",{className:"font-bold mb-2"},"Bars Nomades"),React.createElement("div",{className:"space-y-2 mb-4"},w.map(e=>React.createElement("div",{key:e.id,className:"flex items-center justify-between bg-neutral-800 p-2 rounded"},Zs===e.id?React.createElement("div",{className:"flex items-center gap-2 flex-1"},React.createElement("span",null,e.type==="biere"?"\u{1F37A}":"\u{1F34E}"),React.createElement("input",{type:"text",value:Bt,onChange:t=>us(t.target.value),className:"flex-1 px-2 py-1 bg-neutral-700 rounded text-sm",autoFocus:!0,onKeyDown:t=>{t.key==="Enter"?(Es(e.id,Bt),Be(null)):t.key==="Escape"&&Be(null)}}),React.createElement("button",{onClick:()=>{Es(e.id,Bt),Be(null)},className:"text-green-400 text-sm px-2"},"\u2713"),React.createElement("button",{onClick:()=>Be(null),className:"text-neutral-400 text-sm px-2"},"\u2715")):React.createElement(React.Fragment,null,React.createElement("span",null,e.type==="biere"?"\u{1F37A}":"\u{1F34E}"," ",e.nom),React.createElement("div",{className:"flex items-center gap-2"},_&&React.createElement("button",{onClick:()=>{Be(e.id),us(e.nom)},className:"text-blue-400 text-sm",title:"Renommer"},"\u270F\uFE0F"),React.createElement("button",{onClick:()=>wa(e.id),className:"text-red-400 text-sm"},"\u2715")))))),React.createElement("div",{className:"flex gap-2"},React.createElement("input",{type:"text",id:"newBarNom",placeholder:"Nom du bar",className:"flex-1 px-3 py-2 bg-neutral-800 rounded-lg text-sm"}),React.createElement("select",{id:"newBarType",className:"px-3 py-2 bg-neutral-800 rounded-lg text-sm"},React.createElement("option",{value:"biere"},"\u{1F37A} Bi\xE8re"),React.createElement("option",{value:"cidre"},"\u{1F34E} Cidre")),React.createElement("button",{onClick:()=>{const e=document.getElementById("newBarNom").value,t=document.getElementById("newBarType").value;e&&(ya(e,t),document.getElementById("newBarNom").value="")},className:"px-4 py-2 bg-red-600 rounded-lg text-sm"},"+"))),_&&React.createElement(React.Fragment,null,React.createElement("hr",{className:"border-neutral-700"}),React.createElement("div",null,React.createElement("h4",{className:"font-bold mb-2"},"\u{1F4E7} Email bilan automatique"),React.createElement("p",{className:"text-xs text-neutral-400 mb-2"},"Recevez le bilan PDF \xE0 00h30 chaque jour"),React.createElement("input",{type:"email",id:"adminEmailInput",defaultValue:Le,placeholder:"email@exemple.com",className:"w-full px-4 py-2 bg-neutral-800 rounded-lg text-sm"}),React.createElement("p",{className:"text-xs text-neutral-500 mt-2"},"\u{1F4A1} \xC0 00h30, le PDF sera g\xE9n\xE9r\xE9 et votre client mail s'ouvrira avec le bilan en lien.")),React.createElement("hr",{className:"border-neutral-700"}),React.createElement("div",null,React.createElement("h4",{className:"font-bold mb-3"},"\u{1F4B0} Tarifs"),React.createElement("div",{className:"grid grid-cols-3 gap-2"},React.createElement("div",null,React.createElement("label",{className:"block text-xs text-neutral-400 mb-1"},"Prix pinte (\u20AC)"),React.createElement("input",{type:"number",step:"0.5",id:"prixPinte",defaultValue:c.prixPinte,className:"w-full px-3 py-2 bg-neutral-800 rounded-lg text-sm"})),React.createElement("div",null,React.createElement("label",{className:"block text-xs text-neutral-400 mb-1"},"Prix pichet (\u20AC)"),React.createElement("input",{type:"number",step:"0.5",id:"prixPichet",defaultValue:c.prixPichet,className:"w-full px-3 py-2 bg-neutral-800 rounded-lg text-sm"})),React.createElement("div",null,React.createElement("label",{className:"block text-xs text-neutral-400 mb-1"},"Prix gobelet (\u20AC)"),React.createElement("input",{type:"number",step:"0.5",id:"prixGobelet",defaultValue:c.prixGobelet,className:"w-full px-3 py-2 bg-neutral-800 rounded-lg text-sm"})))),React.createElement("hr",{className:"border-neutral-700"}),React.createElement("div",null,React.createElement("h4",{className:"font-bold mb-3"},"\u{1F6E2}\uFE0F Volumes"),React.createElement("div",{className:"grid grid-cols-2 gap-2 mb-3"},React.createElement("div",null,React.createElement("label",{className:"block text-xs text-neutral-400 mb-1"},"Vol. pinte (L)"),React.createElement("input",{type:"number",step:"0.1",id:"volumePinte",defaultValue:c.volumePinte,className:"w-full px-3 py-2 bg-neutral-800 rounded-lg text-sm"})),React.createElement("div",null,React.createElement("label",{className:"block text-xs text-neutral-400 mb-1"},"Vol. pichet (L)"),React.createElement("input",{type:"number",step:"0.1",id:"volumePichet",defaultValue:c.volumePichet,className:"w-full px-3 py-2 bg-neutral-800 rounded-lg text-sm"}))),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("div",null,React.createElement("label",{className:"block text-xs text-neutral-400 mb-1"},"Vol. f\xFBt bi\xE8re (L)"),React.createElement("input",{type:"number",step:"1",id:"volumeFutBiere",defaultValue:c.volumeFutBiere,className:"w-full px-3 py-2 bg-neutral-800 rounded-lg text-sm"})),React.createElement("div",null,React.createElement("label",{className:"block text-xs text-neutral-400 mb-1"},"Vol. f\xFBt cidre (L)"),React.createElement("input",{type:"number",step:"1",id:"volumeFutCidre",defaultValue:c.volumeFutCidre,className:"w-full px-3 py-2 bg-neutral-800 rounded-lg text-sm"}))),React.createElement("p",{className:"text-xs text-neutral-500 mt-2"},"\u2139\uFE0F Gobelets = consommable, non comptabilis\xE9 dans les volumes")),React.createElement("hr",{className:"border-neutral-700"}),React.createElement("div",null,React.createElement("h4",{className:"font-bold mb-2"},"\u{1F4C9} Seuil alerte perte"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("input",{type:"number",step:"1",id:"seuilPerte",defaultValue:c.seuilPerte,className:"w-20 px-3 py-2 bg-neutral-800 rounded-lg text-sm"}),React.createElement("span",{className:"text-neutral-400"},"%")),React.createElement("p",{className:"text-xs text-neutral-500 mt-2"},"Taux de perte acceptable (mousse, rin\xE7age...)")))),React.createElement("div",{className:"flex gap-2 mt-6"},React.createElement("button",{onClick:()=>R(!1),className:"flex-1 py-3 bg-neutral-700 rounded-lg"},"Annuler"),React.createElement("button",{onClick:()=>{var t,s,a,r,n,o,u,g,l;const e=((t=document.getElementById("adminEmailInput"))==null?void 0:t.value)||"";e!==Le&&(ys(e),v.ref(`sessions/${p}/config/adminEmail`).set(e)),Pa({stockInitialBiere:parseInt(document.getElementById("stockBiere").value)||50,stockInitialCidre:parseInt(document.getElementById("stockCidre").value)||20,maxFutsParBar:parseInt(document.getElementById("maxFuts").value)||3,nombreJours:parseInt(document.getElementById("nbJours").value)||4,prixPinte:parseFloat((s=document.getElementById("prixPinte"))==null?void 0:s.value)||6,prixPichet:parseFloat((a=document.getElementById("prixPichet"))==null?void 0:a.value)||15,prixGobelet:parseFloat((r=document.getElementById("prixGobelet"))==null?void 0:r.value)||2,volumePinte:parseFloat((n=document.getElementById("volumePinte"))==null?void 0:n.value)||.5,volumePichet:parseFloat((o=document.getElementById("volumePichet"))==null?void 0:o.value)||1.5,volumeFutBiere:parseFloat((u=document.getElementById("volumeFutBiere"))==null?void 0:u.value)||30,volumeFutCidre:parseFloat((g=document.getElementById("volumeFutCidre"))==null?void 0:g.value)||20,seuilPerte:parseFloat((l=document.getElementById("seuilPerte"))==null?void 0:l.value)||10})},className:"flex-1 py-3 bg-red-600 rounded-lg font-medium"},"\u{1F4BE} Sauvegarder")),T&&React.createElement("button",{onClick:()=>Dt(!0),className:"w-full mt-4 py-3 bg-red-900 hover:bg-red-800 rounded-lg font-medium border border-red-600"},"\u{1F512} R\xE9initialiser (Admin)"))),Ys&&React.createElement("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-red-950 rounded-2xl w-full max-w-md p-6 border border-red-700"},React.createElement("h3",{className:"text-xl font-bold mb-4 text-red-400"},"\u26A0\uFE0F R\xE9initialisation Admin"),React.createElement("div",{className:"bg-red-900/50 rounded-lg p-4 mb-4"},React.createElement("p",{className:"font-bold text-yellow-400 mb-2"},"\u26A0\uFE0F Suppression :"),React.createElement("ul",{className:"text-red-300 text-sm space-y-1 ml-4"},React.createElement("li",null,"\u2022 F\xFBts attribu\xE9s"),React.createElement("li",null,"\u2022 Historiques f\xFBts/ventes"),React.createElement("li",null,"\u2022 Affectations b\xE9n\xE9voles")),React.createElement("p",{className:"text-green-400 text-sm mt-3"},"La configuration des bars sera conserv\xE9e.")),React.createElement("div",{className:"mb-4"},React.createElement("label",{className:"block text-sm text-neutral-400 mb-1"},"Mot de passe admin"),React.createElement("div",{className:"relative"},React.createElement("input",{type:"password",value:ds,onChange:e=>Vt(e.target.value),placeholder:"Mot de passe...",className:"w-full px-4 py-2 bg-neutral-800 rounded-lg"}))),React.createElement("div",{className:"space-y-2"},React.createElement("button",{onClick:()=>Rs(!0),className:"w-full py-3 bg-neutral-700 hover:bg-neutral-600 rounded-lg flex items-center justify-center gap-2"},"\u{1F4E5} Exporter puis r\xE9initialiser"),React.createElement("button",{onClick:()=>Rs(!1),className:"w-full py-3 bg-neutral-700 hover:bg-neutral-600 rounded-lg flex items-center justify-center gap-2"},"\u{1F5D1}\uFE0F R\xE9initialiser sans exporter")),React.createElement("button",{onClick:()=>{Dt(!1),Vt("")},className:"w-full mt-4 py-3 bg-neutral-800 rounded-lg"},"Annuler"))),zs&&React.createElement("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-neutral-900 rounded-2xl w-full max-w-sm p-6"},React.createElement("h3",{className:"text-xl font-bold mb-4"},"\u{1F4E5} Exporter"),React.createElement("div",{className:"space-y-2"},React.createElement("button",{onClick:()=>{Is(),Ie(!1)},disabled:F.length===0,className:"w-full py-3 bg-purple-600 rounded-lg disabled:opacity-50"},"\u{1F4CB} Historique F\xFBts (",F.length,")"),React.createElement("button",{onClick:()=>{js(),Ie(!1)},disabled:P.length===0,className:"w-full py-3 bg-emerald-600 rounded-lg disabled:opacity-50"},"\u{1F4B0} Historique Ventes (",P.length,")"),React.createElement("button",{onClick:()=>{Xt(),Ie(!1)},disabled:de===0,className:"w-full py-3 bg-indigo-600 rounded-lg disabled:opacity-50"},"\u{1F465} Planning B\xE9n\xE9voles (",de,")"),React.createElement("button",{onClick:()=>Ie(!1),className:"w-full py-3 bg-neutral-700 rounded-lg mt-4"},"Fermer")))),na&&React.createElement("div",{className:"fixed inset-0 bg-black/90 flex flex-col z-50"},React.createElement("div",{className:"bg-amber-900 px-4 py-3 flex items-center justify-between"},React.createElement("h3",{className:"text-xl font-bold"},"\u{1F4C8} Dashboard J",d),React.createElement("div",{className:"flex items-center gap-2"},_&&React.createElement(React.Fragment,null,React.createElement("button",{onClick:za,className:"px-3 py-1 bg-green-600 rounded-lg text-sm"},"\u{1F4CA} Excel"),React.createElement("button",{onClick:Ha,className:"px-3 py-1 bg-red-600 rounded-lg text-sm"},"\u{1F4C4} PDF")),React.createElement("button",{onClick:()=>ms(!1),className:"text-2xl"},"\u2715"))),React.createElement("div",{className:"bg-neutral-800 px-2 py-2 flex gap-1"},React.createElement("button",{onClick:()=>et("synthese"),className:`flex-1 py-2 rounded-lg text-xs font-medium ${xe==="synthese"?"bg-amber-600":"bg-neutral-700"}`},"\u{1F4CA} Synth\xE8se"),React.createElement("button",{onClick:()=>et("ecarts"),className:`flex-1 py-2 rounded-lg text-xs font-medium ${xe==="ecarts"?"bg-amber-600":"bg-neutral-700"}`},"\u{1F4C9} \xC9carts"),React.createElement("button",{onClick:()=>et("graphiques"),className:`flex-1 py-2 rounded-lg text-xs font-medium ${xe==="graphiques"?"bg-amber-600":"bg-neutral-700"}`},"\u{1F4C8} Graphes"),React.createElement("button",{onClick:()=>et("comparatif"),className:`flex-1 py-2 rounded-lg text-xs font-medium ${xe==="comparatif"?"bg-amber-600":"bg-neutral-700"}`},"\u{1F4C5} Jours")),React.createElement("div",{className:"flex-1 overflow-y-auto p-4"},xe==="synthese"&&(()=>{var o,u,g;const e=Wt(),t=Ds(),s=Ja(),a=Ma(),r=mt(),n=_a();return React.createElement("div",{className:"space-y-4 max-w-2xl mx-auto"},React.createElement("div",{className:"grid grid-cols-2 gap-3"},React.createElement("div",{className:"bg-emerald-900/30 p-4 rounded-xl border border-emerald-700"},React.createElement("p",{className:"text-xs text-emerald-300"},"\u{1F4B0} CA Jour"),React.createElement("p",{className:"text-3xl font-black text-emerald-400"},n.caTotal.toFixed(0)," \u20AC")),n.comparaison?React.createElement("div",{className:`p-4 rounded-xl border ${n.comparaison.tendance==="hausse"?"bg-green-900/30 border-green-700":"bg-red-900/30 border-red-700"}`},React.createElement("p",{className:"text-xs text-neutral-300"},"\u{1F4C8} vs J-1"),React.createElement("p",{className:`text-2xl font-black ${n.comparaison.tendance==="hausse"?"text-green-400":"text-red-400"}`},n.comparaison.tendance==="hausse"?"+":"",n.comparaison.ecartVentes.toFixed(0),"\u20AC"),React.createElement("p",{className:`text-sm ${n.comparaison.tendance==="hausse"?"text-green-400":"text-red-400"}`},n.comparaison.tendance==="hausse"?"\u25B2":"\u25BC"," ",Math.abs(n.comparaison.ecartPourcent),"%")):React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl border border-neutral-700"},React.createElement("p",{className:"text-xs text-neutral-400"},"\u{1F4C8} vs J-1"),React.createElement("p",{className:"text-lg text-neutral-500"},"J1 - Pas de comparaison")),React.createElement("div",{className:"bg-blue-900/30 p-4 rounded-xl border border-blue-700"},React.createElement("p",{className:"text-xs text-blue-300"},"\u{1F6E2}\uFE0F F\xFBts consomm\xE9s"),React.createElement("p",{className:"text-3xl font-black text-blue-400"},n.futsConsommes),React.createElement("p",{className:"text-xs text-neutral-400"},n.futsBiere,"\u{1F37A} + ",n.futsCidre,"\u{1F34E}")),React.createElement("div",{className:"bg-purple-900/30 p-4 rounded-xl border border-purple-700"},React.createElement("p",{className:"text-xs text-purple-300"},"\u23F1\uFE0F Dur\xE9e moy. f\xFBt"),React.createElement("p",{className:"text-3xl font-black text-purple-400"},n.dureeMoyenne)),React.createElement("div",{className:`p-4 rounded-xl border ${n.statutPerte==="ok"?"bg-green-900/30 border-green-700":n.statutPerte==="attention"?"bg-yellow-900/30 border-yellow-700":"bg-red-900/30 border-red-700"}`},React.createElement("p",{className:"text-xs text-neutral-300"},"\u{1F4C9} Taux perte"),React.createElement("p",{className:`text-3xl font-black ${n.statutPerte==="ok"?"text-green-400":n.statutPerte==="attention"?"text-yellow-400":"text-red-400"}`},n.tauxPerteGlobal.toFixed(1),"%",n.statutPerte==="ok"?" \u2713":n.statutPerte==="attention"?" \u26A0\uFE0F":" \u{1F534}"),n.manqueAGagner>0&&React.createElement("p",{className:"text-xs text-neutral-400"},"~",n.manqueAGagner.toFixed(0),"\u20AC manque")),React.createElement("div",{className:"bg-amber-900/30 p-4 rounded-xl border border-amber-700"},React.createElement("p",{className:"text-xs text-amber-300"},"\u{1F3AF} Meilleur ratio"),n.barPlusRentable?React.createElement(React.Fragment,null,React.createElement("p",{className:"text-lg font-bold text-amber-400"},n.barPlusRentable.barNom),React.createElement("p",{className:"text-xs text-neutral-400"},n.barPlusRentable.ratioParFut.toFixed(0),"\u20AC/f\xFBt")):React.createElement("p",{className:"text-neutral-500"},"-")),React.createElement("div",{className:"bg-orange-900/30 p-4 rounded-xl border border-orange-700"},React.createElement("p",{className:"text-xs text-orange-300"},"\u26A1 Pic activit\xE9"),React.createElement("p",{className:"text-lg font-bold text-orange-400"},((o=n.picActivite)==null?void 0:o.creneauLabel)||"-"),React.createElement("p",{className:"text-xs text-neutral-400"},((g=(u=n.picActivite)==null?void 0:u.caDeclare)==null?void 0:g.toFixed(0))||0,"\u20AC")),React.createElement("div",{className:"bg-teal-900/30 p-4 rounded-xl border border-teal-700"},React.createElement("p",{className:"text-xs text-teal-300"},"\u{1F4E6} Stock restant"),React.createElement("p",{className:"text-2xl font-black text-teal-400"},oe,"\u{1F37A} ",ie,"\u{1F34E}"))),React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-3"},"\u{1F3C6} Classement bars par CA"),React.createElement("div",{className:"space-y-2"},n.classementBars.slice(0,5).map((l,f)=>React.createElement("div",{key:l.barId,className:"flex items-center gap-3 bg-neutral-700/50 p-2 rounded-lg"},React.createElement("span",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold ${f===0?"bg-amber-500 text-black":f===1?"bg-neutral-400 text-black":f===2?"bg-amber-700":"bg-neutral-600"}`},f+1),React.createElement("div",{className:"flex-1"},React.createElement("p",{className:"font-medium"},l.type==="biere"?"\u{1F37A}":"\u{1F34E}"," ",l.barNom),React.createElement("p",{className:"text-xs text-neutral-400"},l.futsVides," f\xFBts \u2022 ",l.ratioParFut.toFixed(0),"\u20AC/f\xFBt")),React.createElement("div",{className:"text-right"},React.createElement("p",{className:"font-bold text-emerald-400"},l.caDeclare.toFixed(0)," \u20AC")))))),React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-3"},"\u{1F4C8} Progression festival"),React.createElement("div",{className:"space-y-2"},n.progressionFestival.map((l,f)=>{const i=Math.max(...n.progressionFestival.map(y=>y.ca),1),x=l.ca/i*100,N=f>0&&n.progressionFestival[f-1].ca>0?((l.ca-n.progressionFestival[f-1].ca)/n.progressionFestival[f-1].ca*100).toFixed(0):null;return React.createElement("div",{key:l.jour,className:"flex items-center gap-3"},React.createElement("span",{className:`w-8 font-bold ${l.jour===d?"text-amber-400":"text-neutral-400"}`},"J",l.jour),React.createElement("div",{className:"flex-1 bg-neutral-700 rounded-full h-6 overflow-hidden"},React.createElement("div",{className:`h-full ${l.jour===d?"bg-amber-500":"bg-emerald-600"}`,style:{width:`${x}%`}})),React.createElement("div",{className:"w-28 text-right text-sm"},React.createElement("span",{className:"font-medium"},l.ca.toFixed(0)," \u20AC"),N&&React.createElement("span",{className:`ml-1 text-xs ${parseInt(N)>=0?"text-green-400":"text-red-400"}`},parseInt(N)>=0?"+":"",N,"%")))}))),React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-3"},"\u{1F4CA} Activit\xE9 par heure"),React.createElement("div",{className:"space-y-1"},a.map(l=>{const f=Math.max(...a.map(i=>i.sorties+i.retours),1);return React.createElement("div",{key:l.heure,className:"flex items-center gap-2 text-xs"},React.createElement("span",{className:"w-12 text-neutral-400"},l.heureAffichage,"h"),React.createElement("div",{className:"flex-1 flex h-4 bg-neutral-700 rounded overflow-hidden"},React.createElement("div",{className:"bg-green-500",style:{width:`${l.sorties/f*100}%`}}),React.createElement("div",{className:"bg-blue-500",style:{width:`${l.retours/f*100}%`}})),React.createElement("span",{className:"w-16 text-right"},React.createElement("span",{className:"text-green-400"},"+",l.sorties),React.createElement("span",{className:"text-blue-400 ml-1"},"-",l.retours)))}))),React.createElement("div",{className:"bg-gradient-to-r from-amber-900/30 to-orange-900/30 p-4 rounded-xl border border-amber-700"},React.createElement("h4",{className:"font-bold mb-3"},"\u23F1\uFE0F Pr\xE9vision rupture stock"),React.createElement("div",{className:"grid grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("p",{className:"text-sm text-amber-300"},"\u{1F37A} Bi\xE8re (",oe,")"),React.createElement("p",{className:"text-xl font-bold text-amber-400"},s.biere.tempsRestant||"-"),React.createElement("p",{className:"text-xs text-neutral-500"},s.biere.rythme," f\xFBts/h")),React.createElement("div",null,React.createElement("p",{className:"text-sm text-orange-300"},"\u{1F34E} Cidre (",ie,")"),React.createElement("p",{className:"text-xl font-bold text-orange-400"},s.cidre.tempsRestant||"-"),React.createElement("p",{className:"text-xs text-neutral-500"},s.cidre.rythme," f\xFBts/h")))))})(),xe==="ecarts"&&(()=>{const e=Pe(),t=Se(),s=pt(),a=n=>n==="ok"?"\u2705":n==="attention"?"\u26A0\uFE0F":"\u{1F534}",r=n=>n==="ok"?"text-green-400":n==="attention"?"text-yellow-400":"text-red-400";return React.createElement("div",{className:"space-y-4 max-w-2xl mx-auto"},React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-4"},"\u{1F4C9} Analyse des \xE9carts - J",d),React.createElement("div",{className:"overflow-x-auto"},React.createElement("table",{className:"w-full text-sm"},React.createElement("thead",null,React.createElement("tr",{className:"border-b border-neutral-600"},React.createElement("th",{className:"text-left py-2"}),React.createElement("th",{className:"text-right py-2 px-2"},"\u{1F37A} Bi\xE8re"),React.createElement("th",{className:"text-right py-2 px-2"},"\u{1F34E} Cidre"),React.createElement("th",{className:"text-right py-2 px-2"},"Total"))),React.createElement("tbody",null,React.createElement("tr",{className:"border-b border-neutral-700"},React.createElement("td",{className:"py-2 text-neutral-400"},"F\xFBts vides"),React.createElement("td",{className:"text-right px-2"},e.biere.futsVides),React.createElement("td",{className:"text-right px-2"},e.cidre.futsVides),React.createElement("td",{className:"text-right px-2 font-bold"},e.total.futsVides)),React.createElement("tr",{className:"border-b border-neutral-700"},React.createElement("td",{className:"py-2 text-neutral-400"},"Volume sorti"),React.createElement("td",{className:"text-right px-2"},e.biere.volumeSorti," L"),React.createElement("td",{className:"text-right px-2"},e.cidre.volumeSorti," L"),React.createElement("td",{className:"text-right px-2 font-bold"},e.total.volumeSorti," L")),React.createElement("tr",{className:"border-b border-neutral-700"},React.createElement("td",{className:"py-2 text-neutral-400"},"Pintes vendues"),React.createElement("td",{className:"text-right px-2"},e.biere.pintes),React.createElement("td",{className:"text-right px-2"},e.cidre.pintes),React.createElement("td",{className:"text-right px-2"},e.biere.pintes+e.cidre.pintes)),React.createElement("tr",{className:"border-b border-neutral-700"},React.createElement("td",{className:"py-2 text-neutral-400"},"Pichets vendus"),React.createElement("td",{className:"text-right px-2"},e.biere.pichets),React.createElement("td",{className:"text-right px-2"},e.cidre.pichets),React.createElement("td",{className:"text-right px-2"},e.biere.pichets+e.cidre.pichets)),React.createElement("tr",{className:"border-b border-neutral-700"},React.createElement("td",{className:"py-2 text-neutral-400"},"Volume vendu"),React.createElement("td",{className:"text-right px-2"},e.biere.volumeVendu.toFixed(1)," L"),React.createElement("td",{className:"text-right px-2"},e.cidre.volumeVendu.toFixed(1)," L"),React.createElement("td",{className:"text-right px-2 font-bold"},e.total.volumeVendu.toFixed(1)," L")),React.createElement("tr",{className:"border-b border-neutral-700 bg-neutral-700/30"},React.createElement("td",{className:"py-2 font-bold"},"\xC9cart volume"),React.createElement("td",{className:"text-right px-2 font-bold"},e.biere.ecartVolume.toFixed(1)," L"),React.createElement("td",{className:"text-right px-2 font-bold"},e.cidre.ecartVolume.toFixed(1)," L"),React.createElement("td",{className:"text-right px-2 font-bold"},e.total.ecartVolume.toFixed(1)," L")),React.createElement("tr",{className:"border-b border-neutral-700 bg-neutral-700/30"},React.createElement("td",{className:"py-2 font-bold"},"Taux perte"),React.createElement("td",{className:`text-right px-2 font-bold ${r(e.biere.statutPerte)}`},e.biere.tauxPerte.toFixed(1),"% ",a(e.biere.statutPerte)),React.createElement("td",{className:`text-right px-2 font-bold ${r(e.cidre.statutPerte)}`},e.cidre.tauxPerte.toFixed(1),"% ",a(e.cidre.statutPerte)),React.createElement("td",{className:`text-right px-2 font-bold ${r(e.total.statutPerte)}`},e.total.tauxPerte.toFixed(1),"% ",a(e.total.statutPerte)))))),e.total.manqueAGagner>0&&React.createElement("div",{className:"mt-3 p-3 bg-red-900/30 rounded-lg border border-red-700"},React.createElement("p",{className:"text-sm text-red-300"},"\u{1F4B8} Manque \xE0 gagner estim\xE9 : ",React.createElement("span",{className:"font-bold"},"~",e.total.manqueAGagner.toFixed(0)," \u20AC")))),React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-4"},"\u{1F4B0} Contr\xF4le coh\xE9rence CA"),React.createElement("div",{className:"overflow-x-auto"},React.createElement("table",{className:"w-full text-sm"},React.createElement("thead",null,React.createElement("tr",{className:"border-b border-neutral-600"},React.createElement("th",{className:"text-left py-2"}),React.createElement("th",{className:"text-right py-2 px-2"},"\u{1F37A} Bi\xE8re"),React.createElement("th",{className:"text-right py-2 px-2"},"\u{1F34E} Cidre"),React.createElement("th",{className:"text-right py-2 px-2"},"Total"))),React.createElement("tbody",null,React.createElement("tr",{className:"border-b border-neutral-700"},React.createElement("td",{className:"py-2 text-neutral-400"},"CA d\xE9clar\xE9"),React.createElement("td",{className:"text-right px-2"},e.biere.caDeclare.toFixed(2)," \u20AC"),React.createElement("td",{className:"text-right px-2"},e.cidre.caDeclare.toFixed(2)," \u20AC"),React.createElement("td",{className:"text-right px-2 font-bold"},e.total.caDeclare.toFixed(2)," \u20AC")),React.createElement("tr",{className:"border-b border-neutral-700"},React.createElement("td",{className:"py-2 text-neutral-400"},"CA th\xE9orique*"),React.createElement("td",{className:"text-right px-2"},e.biere.caTheorique.toFixed(2)," \u20AC"),React.createElement("td",{className:"text-right px-2"},e.cidre.caTheorique.toFixed(2)," \u20AC"),React.createElement("td",{className:"text-right px-2 font-bold"},e.total.caTheorique.toFixed(2)," \u20AC")),React.createElement("tr",{className:"border-b border-neutral-700 bg-neutral-700/30"},React.createElement("td",{className:"py-2 font-bold"},"\xC9cart CA"),React.createElement("td",{className:`text-right px-2 font-bold ${e.biere.ecartCa>=0?"text-green-400":"text-red-400"}`},e.biere.ecartCa>=0?"+":"",e.biere.ecartCa.toFixed(2)," \u20AC"),React.createElement("td",{className:`text-right px-2 font-bold ${e.cidre.ecartCa>=0?"text-green-400":"text-red-400"}`},e.cidre.ecartCa>=0?"+":"",e.cidre.ecartCa.toFixed(2)," \u20AC"),React.createElement("td",{className:`text-right px-2 font-bold ${e.total.ecartCa>=0?"text-green-400":"text-red-400"}`},e.total.ecartCa>=0?"+":"",e.total.ecartCa.toFixed(2)," \u20AC")),React.createElement("tr",null,React.createElement("td",{className:"py-2 font-bold"},"Coh\xE9rence"),React.createElement("td",{className:`text-right px-2 font-bold ${e.biere.coherenceCa>=95?"text-green-400":e.biere.coherenceCa>=90?"text-yellow-400":"text-red-400"}`},e.biere.coherenceCa.toFixed(1),"%"),React.createElement("td",{className:`text-right px-2 font-bold ${e.cidre.coherenceCa>=95?"text-green-400":e.cidre.coherenceCa>=90?"text-yellow-400":"text-red-400"}`},e.cidre.coherenceCa.toFixed(1),"%"),React.createElement("td",{className:"text-right px-2"},"-"))))),React.createElement("p",{className:"text-xs text-neutral-500 mt-2"},"* CA th\xE9orique = (Pintes \xD7 ",c.prixPinte,"\u20AC) + (Pichets \xD7 ",c.prixPichet,"\u20AC) + (Gobelets \xD7 ",c.prixGobelet,"\u20AC)")),React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-4"},"\u{1F37A} \xC9carts par bar"),React.createElement("div",{className:"space-y-2"},t.map(n=>React.createElement("div",{key:n.barId,className:`p-3 rounded-lg border ${n.statutPerte==="ok"?"bg-green-900/20 border-green-700":n.statutPerte==="attention"?"bg-yellow-900/20 border-yellow-700":"bg-red-900/20 border-red-700"}`},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("p",{className:"font-bold"},n.type==="biere"?"\u{1F37A}":"\u{1F34E}"," ",n.barNom),React.createElement("p",{className:"text-xs text-neutral-400"},n.futsVides," f\xFBts \u2022 ",n.volumeSorti,"L sorti \u2022 ",n.volumeVendu.toFixed(1),"L vendu")),React.createElement("div",{className:"text-right"},React.createElement("p",{className:`text-xl font-bold ${r(n.statutPerte)}`},n.tauxPerte.toFixed(1),"% ",a(n.statutPerte)),React.createElement("p",{className:"text-xs text-neutral-400"},n.caDeclare.toFixed(0),"\u20AC CA"))))))),React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-4"},"\u23F1\uFE0F CA par cr\xE9neau"),React.createElement("div",{className:"space-y-2"},s.map(n=>React.createElement("div",{key:n.creneauId,className:"p-3 bg-neutral-700/50 rounded-lg"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("p",{className:"font-bold"},n.creneauLabel),React.createElement("p",{className:"text-xs text-neutral-400"},n.pintes," pintes \u2022 ",n.pichets," pichets \u2022 ",n.gobelets," gobelets")),React.createElement("div",{className:"text-right"},React.createElement("p",{className:"text-lg font-bold text-emerald-400"},n.caDeclare.toFixed(0)," \u20AC"),React.createElement("p",{className:`text-xs ${n.ecartCa>=0?"text-green-400":"text-red-400"}`},"vs th\xE9o: ",n.ecartCa>=0?"+":"",n.ecartCa.toFixed(0),"\u20AC"))))))),React.createElement("div",{className:"bg-neutral-800 p-3 rounded-lg"},React.createElement("p",{className:"text-xs text-neutral-400"},React.createElement("span",{className:"text-green-400"},"\u2705 OK")," \u2264 ",c.seuilPerte,"% \u2022",React.createElement("span",{className:"text-yellow-400 ml-2"},"\u26A0\uFE0F Attention")," ",c.seuilPerte,"-",(c.seuilPerte*1.5).toFixed(0),"% \u2022",React.createElement("span",{className:"text-red-400 ml-2"},"\u{1F534} Alerte")," ",">"," ",(c.seuilPerte*1.5).toFixed(0),"%")))})(),xe==="graphiques"&&(()=>{const e=Se(),t=pt(),s=Pe(),a=Yt(),r=({type:n,data:o,options:u,id:g})=>{const l=Hs(null),f=Hs(null),[i,x]=m(!!window.Chart);return Y(()=>{window.Chart||window.loadChartJS().then(()=>x(!0))},[]),Y(()=>{if(!(!l.current||!i))return f.current&&f.current.destroy(),f.current=new Chart(l.current,{type:n,data:o,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#fff"}}},scales:n!=="pie"&&n!=="doughnut"?{x:{ticks:{color:"#aaa"},grid:{color:"#333"}},y:{ticks:{color:"#aaa"},grid:{color:"#333"}}}:void 0,...u}}),()=>{f.current&&f.current.destroy()}},[o,i]),React.createElement("canvas",{ref:l,id:g})};return React.createElement("div",{className:"space-y-4 max-w-2xl mx-auto"},React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-3"},"\u{1F4C8} \xC9volution CA par cr\xE9neau (J",d,")"),React.createElement("div",{className:"h-64"},React.createElement(r,{id:"chartCaCreneaux",type:"line",data:{labels:t.map(n=>n.creneauLabel),datasets:[{label:"CA (\u20AC)",data:t.map(n=>n.caDeclare),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.2)",fill:!0,tension:.3}]}}))),React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-3"},"\u{1F3C6} CA par bar (J",d,")"),React.createElement("div",{className:"h-64"},React.createElement(r,{id:"chartCaBars",type:"bar",data:{labels:e.map(n=>n.barNom),datasets:[{label:"CA (\u20AC)",data:e.map(n=>n.caDeclare),backgroundColor:e.map(n=>n.type==="biere"?"#f59e0b":"#22c55e"),borderRadius:4}]}})),React.createElement("div",{className:"flex gap-4 mt-2 text-xs text-neutral-400 justify-center"},React.createElement("span",null,React.createElement("span",{className:"inline-block w-3 h-3 bg-amber-500 rounded mr-1"}),"Bi\xE8re"),React.createElement("span",null,React.createElement("span",{className:"inline-block w-3 h-3 bg-green-500 rounded mr-1"}),"Cidre"))),React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-3"},"\u{1F967} R\xE9partition Bi\xE8re / Cidre (J",d,")"),React.createElement("div",{className:"h-64"},React.createElement(r,{id:"chartRepartition",type:"doughnut",data:{labels:["Bi\xE8re","Cidre"],datasets:[{data:[s.biere.caDeclare,s.cidre.caDeclare],backgroundColor:["#f59e0b","#22c55e"],borderColor:["#d97706","#16a34a"],borderWidth:2}]},options:{plugins:{legend:{position:"bottom",labels:{color:"#fff",padding:20}}}}})),React.createElement("div",{className:"grid grid-cols-2 gap-4 mt-4 text-center"},React.createElement("div",{className:"bg-amber-900/30 p-3 rounded-lg"},React.createElement("p",{className:"text-amber-400 font-bold text-xl"},s.biere.caDeclare.toFixed(0)," \u20AC"),React.createElement("p",{className:"text-xs text-neutral-400"},"Bi\xE8re (",s.total.caDeclare>0?(s.biere.caDeclare/s.total.caDeclare*100).toFixed(0):0,"%)")),React.createElement("div",{className:"bg-green-900/30 p-3 rounded-lg"},React.createElement("p",{className:"text-green-400 font-bold text-xl"},s.cidre.caDeclare.toFixed(0)," \u20AC"),React.createElement("p",{className:"text-xs text-neutral-400"},"Cidre (",s.total.caDeclare>0?(s.cidre.caDeclare/s.total.caDeclare*100).toFixed(0):0,"%)")))),React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-3"},"\u{1F4C5} \xC9volution CA sur le festival"),React.createElement("div",{className:"h-64"},React.createElement(r,{id:"chartCaJours",type:"bar",data:{labels:a.jours.map(n=>`J${n.jour}`),datasets:[{label:"CA (\u20AC)",data:a.jours.map(n=>n.ca),backgroundColor:a.jours.map(n=>n.jour===d?"#f59e0b":"#6b7280"),borderRadius:4}]}}))),React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-3"},"\u{1F4C9} Taux de perte par bar (J",d,")"),React.createElement("div",{className:"h-64"},React.createElement(r,{id:"chartPertesBars",type:"bar",data:{labels:e.map(n=>n.barNom),datasets:[{label:"Taux perte (%)",data:e.map(n=>n.tauxPerte),backgroundColor:e.map(n=>n.tauxPerte<=c.seuilPerte?"#22c55e":n.tauxPerte<=c.seuilPerte*1.5?"#eab308":"#ef4444"),borderRadius:4}]},options:{plugins:{annotation:{annotations:{line1:{type:"line",yMin:c.seuilPerte,yMax:c.seuilPerte,borderColor:"#ef4444",borderWidth:2,borderDash:[5,5]}}}}}})),React.createElement("p",{className:"text-xs text-neutral-500 mt-2 text-center"},"Seuil acceptable : ",c.seuilPerte,"% (ligne rouge pointill\xE9e)")))})(),xe==="comparatif"&&(()=>{const e=Yt();return React.createElement("div",{className:"space-y-4 max-w-2xl mx-auto"},React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-4"},"\u{1F4C5} Comparatif Festival"),React.createElement("div",{className:"overflow-x-auto"},React.createElement("table",{className:"w-full text-sm"},React.createElement("thead",null,React.createElement("tr",{className:"border-b border-neutral-600"},React.createElement("th",{className:"text-left py-2"}),e.jours.map(t=>React.createElement("th",{key:t.jour,className:`text-center py-2 px-2 ${t.jour===d?"text-amber-400":""}`},"J",t.jour)))),React.createElement("tbody",null,React.createElement("tr",{className:"border-b border-neutral-700"},React.createElement("td",{className:"py-2 text-neutral-400"},"\u{1F4B0} CA"),e.jours.map(t=>React.createElement("td",{key:t.jour,className:`text-center px-2 font-bold ${t.jour===d?"text-amber-400":""}`},t.hasDonnees?`${t.ca.toFixed(0)}\u20AC`:"-"))),React.createElement("tr",{className:"border-b border-neutral-700"},React.createElement("td",{className:"py-2 text-neutral-400"},"\u{1F37A} F\xFBts bi\xE8re"),e.jours.map(t=>React.createElement("td",{key:t.jour,className:"text-center px-2"},t.hasDonnees?t.futsBiere:"-"))),React.createElement("tr",{className:"border-b border-neutral-700"},React.createElement("td",{className:"py-2 text-neutral-400"},"\u{1F34E} F\xFBts cidre"),e.jours.map(t=>React.createElement("td",{key:t.jour,className:"text-center px-2"},t.hasDonnees?t.futsCidre:"-"))),React.createElement("tr",{className:"border-b border-neutral-700"},React.createElement("td",{className:"py-2 text-neutral-400"},"\u{1F4C9} Taux perte"),e.jours.map(t=>React.createElement("td",{key:t.jour,className:`text-center px-2 ${t.tauxPerte<=c.seuilPerte?"text-green-400":t.tauxPerte<=c.seuilPerte*1.5?"text-yellow-400":"text-red-400"}`},t.hasDonnees?`${t.tauxPerte.toFixed(1)}%`:"-"))),React.createElement("tr",{className:"border-b border-neutral-700"},React.createElement("td",{className:"py-2 text-neutral-400"},"\u{1F3C6} Top bar"),e.jours.map(t=>React.createElement("td",{key:t.jour,className:"text-center px-2 text-xs"},t.hasDonnees?t.topBar:"-"))),React.createElement("tr",null,React.createElement("td",{className:"py-2 text-neutral-400"},"\u26A1 Pic"),e.jours.map(t=>React.createElement("td",{key:t.jour,className:"text-center px-2 text-xs"},t.hasDonnees?t.picCreneau:"-"))))))),React.createElement("div",{className:"grid grid-cols-2 gap-4"},React.createElement("div",{className:"bg-emerald-900/30 p-4 rounded-xl border border-emerald-700"},React.createElement("p",{className:"text-sm text-emerald-300"},"\u{1F4B0} CA Total Festival"),React.createElement("p",{className:"text-3xl font-black text-emerald-400"},e.caTotal.toFixed(0)," \u20AC")),React.createElement("div",{className:"bg-blue-900/30 p-4 rounded-xl border border-blue-700"},React.createElement("p",{className:"text-sm text-blue-300"},"\u{1F6E2}\uFE0F F\xFBts consomm\xE9s"),React.createElement("p",{className:"text-3xl font-black text-blue-400"},e.futsTotal))),React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-4"},"\u{1F4C8} \xC9volution CA"),React.createElement("div",{className:"space-y-3"},e.jours.map((t,s)=>{const a=Math.max(...e.jours.map(o=>o.ca),1),r=t.ca/a*100,n=s>0&&e.jours[s-1].ca>0?((t.ca-e.jours[s-1].ca)/e.jours[s-1].ca*100).toFixed(0):null;return React.createElement("div",{key:t.jour},React.createElement("div",{className:"flex items-center justify-between mb-1"},React.createElement("span",{className:`font-bold ${t.jour===d?"text-amber-400":"text-neutral-300"}`},"Jour ",t.jour),React.createElement("div",null,React.createElement("span",{className:"font-bold"},t.ca.toFixed(0)," \u20AC"),n&&React.createElement("span",{className:`ml-2 text-sm ${parseInt(n)>=0?"text-green-400":"text-red-400"}`},"(",parseInt(n)>=0?"+":"",n,"%)"))),React.createElement("div",{className:"bg-neutral-700 rounded-full h-4 overflow-hidden"},React.createElement("div",{className:`h-full ${t.jour===d?"bg-amber-500":"bg-emerald-600"} transition-all`,style:{width:`${t.hasDonnees?r:0}%`}})))}))),d>1&&React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl"},React.createElement("h4",{className:"font-bold mb-3"},"\u{1F4CA} Moyennes"),React.createElement("div",{className:"grid grid-cols-2 gap-4 text-center"},React.createElement("div",null,React.createElement("p",{className:"text-neutral-400 text-sm"},"CA moyen/jour"),React.createElement("p",{className:"text-2xl font-bold text-emerald-400"},(e.caTotal/d).toFixed(0)," \u20AC")),React.createElement("div",null,React.createElement("p",{className:"text-neutral-400 text-sm"},"F\xFBts moy./jour"),React.createElement("p",{className:"text-2xl font-bold text-blue-400"},(e.futsTotal/d).toFixed(1))))))})())),ra&&React.createElement("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-neutral-900 rounded-2xl w-full max-w-sm p-6 text-center"},React.createElement("h3",{className:"text-xl font-bold mb-4"},"\u{1F4F1} QR Code de la session"),React.createElement("p",{className:"text-neutral-400 text-sm mb-4"},"Scannez ce code pour rejoindre"),React.createElement("div",{className:"bg-white p-4 rounded-xl inline-block mb-4"},React.createElement("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(window.location.origin+window.location.pathname+"?session="+p)}`,alt:"QR Code",width:"200",height:"200"})),React.createElement("p",{className:"text-2xl font-mono font-bold text-red-400 mb-2"},p),React.createElement("p",{className:"text-xs text-neutral-500 mb-4 break-all"},window.location.origin+window.location.pathname,"?session=",p),React.createElement("button",{onClick:()=>ps(!1),className:"w-full py-3 bg-neutral-700 rounded-lg"},"Fermer"))),Ws&&React.createElement("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-neutral-900 rounded-2xl w-full max-w-sm p-6"},React.createElement("h3",{className:"text-xl font-bold mb-4"},"\u{1F4E1} Session"),React.createElement("div",{className:"bg-neutral-800 p-4 rounded-xl mb-4 text-center"},React.createElement("p",{className:"text-sm text-neutral-400"},"Code \xE0 partager"),React.createElement("p",{className:"text-2xl font-mono font-bold text-red-400"},p),React.createElement("button",{onClick:()=>{We(!1),ps(!0)},className:"mt-2 px-4 py-2 bg-blue-600 rounded-lg text-sm"},"\u{1F4F1} Afficher QR Code")),React.createElement("div",null,React.createElement("div",{className:"flex items-center justify-between mb-2"},React.createElement("p",{className:"text-sm text-neutral-400"},"Utilisateurs connect\xE9s (",qe.length,")"),T&&React.createElement("span",{className:"text-xs text-green-400 bg-green-900/50 px-2 py-0.5 rounded"},"\u{1F513} Admin")),React.createElement("div",{className:"space-y-1"},qe.map(e=>React.createElement("div",{key:e,className:"flex items-center justify-between bg-neutral-800 px-3 py-2 rounded"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),React.createElement("span",null,e," ",e===k&&"(vous)")),T&&e!==k&&React.createElement("button",{onClick:()=>ba(e),className:"px-2 py-1 bg-red-600/50 hover:bg-red-600 rounded text-xs font-medium transition-colors"},"\u274C \xC9jecter"))))),React.createElement("div",{className:"flex gap-2 mt-4"},React.createElement("button",{onClick:()=>{We(!1),at(!0),nt(0)},className:"py-3 px-4 bg-blue-900 hover:bg-blue-800 rounded-lg text-sm"},"\u{1F4D6} Tutoriel"),React.createElement("button",{onClick:()=>We(!1),className:"flex-1 py-3 bg-neutral-700 rounded-lg"},"Fermer"),React.createElement("button",{onClick:ha,className:"flex-1 py-3 bg-red-900 hover:bg-red-800 rounded-lg text-red-300 border border-red-700"},"\u{1F6AA} D\xE9connexion")))),Ks&&React.createElement("div",{className:"fixed inset-0 bg-black/90 flex flex-col z-50"},React.createElement("div",{className:"bg-indigo-900 px-4 py-3 flex items-center justify-between"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"text-xl"},"\u{1F465}"),React.createElement("h3",{className:"font-bold"},"Gestion B\xE9n\xE9voles"),React.createElement("span",{className:"ml-2 px-2 py-1 bg-indigo-700 rounded text-sm font-bold"},"J",d)),React.createElement("button",{onClick:()=>ss(!1),className:"text-2xl"},"\u2715")),React.createElement("div",{className:"flex border-b border-neutral-700"},React.createElement("button",{onClick:()=>Ce("planning"),className:`flex-1 py-3 text-sm font-medium ${we==="planning"?"bg-indigo-600 text-white":"bg-neutral-800 text-neutral-400"}`},"\u{1F4C5} Planning"),React.createElement("button",{onClick:()=>Ce("synthese"),className:`flex-1 py-3 text-sm font-medium ${we==="synthese"?"bg-indigo-600 text-white":"bg-neutral-800 text-neutral-400"}`},"\u{1F4CA} Synth\xE8se"),_?React.createElement("button",{onClick:Ba,className:`flex-1 py-3 text-sm font-medium ${we==="parametres"?"bg-indigo-600 text-white":"bg-neutral-800 text-neutral-400"}`},"\u23F0 Cr\xE9neaux"):React.createElement("button",{disabled:!0,className:"flex-1 py-3 text-sm font-medium bg-neutral-900 text-neutral-600 cursor-not-allowed",title:"R\xE9serv\xE9 au cr\xE9ateur de la session"},"\u{1F512} Cr\xE9neaux")),React.createElement("div",{className:"flex-1 overflow-y-auto p-4"},we==="planning"&&React.createElement("div",null,w.length===0?React.createElement("div",{className:"text-center py-8 text-neutral-500"},React.createElement("p",null,"Aucun bar configur\xE9"),React.createElement("p",{className:"text-sm"},"Ajoutez des bars dans les param\xE8tres")):React.createElement(React.Fragment,null,d>1&&de===0&&React.createElement("div",{className:"mb-4 p-3 bg-amber-900/30 border border-amber-700 rounded-xl text-center"},React.createElement("p",{className:"text-sm text-amber-300 mb-2"},"Aucune affectation pour J",d),React.createElement("button",{onClick:qa,disabled:K,className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 rounded-lg text-sm font-medium disabled:opacity-50"},"\u{1F4CB} Copier depuis J",d-1)),React.createElement("div",{className:"flex items-center justify-center gap-4 mb-6"},React.createElement("button",{onClick:()=>{const e=w.findIndex(t=>t.id===J);e>0&&je(w[e-1].id)},disabled:w.findIndex(e=>e.id===J)===0,className:"w-10 h-10 bg-neutral-700 rounded-full disabled:opacity-30"},"\u25C0"),React.createElement("div",{className:"text-center"},React.createElement("h4",{className:"text-lg font-bold"},((Ls=w.find(e=>e.id===J))==null?void 0:Ls.nom)||"Bar"),React.createElement("p",{className:"text-sm text-neutral-400"},((Os=w.find(e=>e.id===J))==null?void 0:Os.type)==="biere"?"\u{1F37A} Bi\xE8re":"\u{1F34E} Cidre")),React.createElement("button",{onClick:()=>{const e=w.findIndex(t=>t.id===J);e<w.length-1&&je(w[e+1].id)},disabled:w.findIndex(e=>e.id===J)===w.length-1,className:"w-10 h-10 bg-neutral-700 rounded-full disabled:opacity-30"},"\u25B6")),React.createElement("div",{className:"flex justify-center gap-2 mb-6"},w.map(e=>{const t=ee[e.id]&&Object.keys(ee[e.id]).length>0;return React.createElement("button",{key:e.id,onClick:()=>je(e.id),className:`w-10 h-10 rounded-full font-bold text-sm ${J===e.id?"bg-indigo-600 text-white scale-110":t?"bg-green-600 text-white":"bg-neutral-700 text-neutral-400"}`},w.indexOf(e)+1)})),React.createElement("div",{className:"space-y-3"},D.map(e=>{var a,r,n;const t=J?ut(J,e.id):null,s=t&&(((a=t.vendeur)==null?void 0:a.nom)||((r=t.serveur)==null?void 0:r.nom)||((n=t.runner)==null?void 0:n.nom));return React.createElement("div",{key:e.id,className:`rounded-xl p-4 ${s?"bg-green-900/30 border border-green-700":"bg-neutral-800"}`},React.createElement("div",{className:"flex items-center justify-between mb-3"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"text-lg"},"\u23F0"),React.createElement("span",{className:"font-bold"},e.label)),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>ja(J,e.id),className:"px-3 py-1.5 bg-indigo-600 rounded-lg text-sm"},s?"\u270F\uFE0F Modifier":"\u2795 Affecter"),s&&React.createElement("button",{onClick:()=>Va(J,e.id),className:"px-3 py-1.5 bg-red-600/50 rounded-lg text-sm"},"\u{1F5D1}\uFE0F"))),s?React.createElement("div",{className:"grid grid-cols-3 gap-2"},React.createElement("div",{className:"bg-amber-900/30 p-2 rounded-lg"},React.createElement("p",{className:"text-xs text-amber-400 mb-1"},"\u{1F6D2} Vendeur"),React.createElement("p",{className:"text-sm font-medium"},ue(t.vendeur))),React.createElement("div",{className:"bg-blue-900/30 p-2 rounded-lg"},React.createElement("p",{className:"text-xs text-blue-400 mb-1"},"\u{1F37A} Serveur"),React.createElement("p",{className:"text-sm font-medium"},ue(t.serveur))),React.createElement("div",{className:"bg-purple-900/30 p-2 rounded-lg"},React.createElement("p",{className:"text-xs text-purple-400 mb-1"},"\u{1F3C3} Runner"),React.createElement("p",{className:"text-sm font-medium"},ue(t.runner)))):React.createElement("p",{className:"text-neutral-500 text-sm text-center py-2"},"Aucun b\xE9n\xE9vole affect\xE9"))})))),we==="synthese"&&React.createElement("div",null,React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h4",{className:"font-bold"},"Tableau de synth\xE8se"),React.createElement("button",{onClick:Xt,disabled:de===0,className:"px-4 py-2 bg-green-600 rounded-lg text-sm disabled:opacity-50"},"\u{1F4E5} Exporter CSV")),React.createElement("div",{className:"overflow-x-auto"},React.createElement("table",{className:"w-full text-sm border-collapse"},React.createElement("thead",null,React.createElement("tr",{className:"bg-indigo-900"},React.createElement("th",{className:"border border-indigo-700 px-2 py-2 text-left"},"Bar"),React.createElement("th",{className:"border border-indigo-700 px-2 py-2 text-left"},"Cr\xE9neau"),React.createElement("th",{className:"border border-indigo-700 px-2 py-2 text-amber-400"},"\u{1F6D2}"),React.createElement("th",{className:"border border-indigo-700 px-2 py-2 text-blue-400"},"\u{1F37A}"),React.createElement("th",{className:"border border-indigo-700 px-2 py-2 text-purple-400"},"\u{1F3C3}"))),React.createElement("tbody",null,w.map((e,t)=>D.map((s,a)=>{const r=ut(e.id,s.id);return React.createElement("tr",{key:`${e.id}-${s.id}`,className:a%2===0?"bg-neutral-900":"bg-neutral-800"},a===0&&React.createElement("td",{rowSpan:D.length,className:`border border-neutral-700 px-2 py-1 font-medium ${e.type==="biere"?"bg-emerald-900/30":"bg-teal-900/30"}`},e.nom),React.createElement("td",{className:"border border-neutral-700 px-2 py-1 text-neutral-400"},s.label),React.createElement("td",{className:"border border-neutral-700 px-2 py-1 text-xs"},r?ue(r.vendeur):"-"),React.createElement("td",{className:"border border-neutral-700 px-2 py-1 text-xs"},r?ue(r.serveur):"-"),React.createElement("td",{className:"border border-neutral-700 px-2 py-1 text-xs"},r?ue(r.runner):"-"))}))))),React.createElement("div",{className:"mt-4 p-3 bg-indigo-900/30 rounded-xl"},React.createElement("p",{className:"text-sm"},React.createElement("strong",null,"R\xE9sum\xE9 :")," ",de," cr\xE9neau(x) avec affectation(s) sur ",w.length*D.length," possibles"))),we==="parametres"&&React.createElement("div",null,React.createElement("h4",{className:"font-bold mb-4"},"Configuration des cr\xE9neaux horaires"),React.createElement("div",{className:"space-y-2 mb-6"},me.map((e,t)=>React.createElement("div",{key:e.id,className:"flex items-center gap-2 bg-neutral-800 p-3 rounded-lg"},React.createElement("span",{className:"w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-sm font-bold"},t+1),React.createElement("input",{type:"text",value:e.label,onChange:s=>{const a=[...me];a[t]={...e,label:s.target.value},Ye(a)},className:"flex-1 px-3 py-2 bg-neutral-700 rounded-lg"}),React.createElement("button",{onClick:()=>La(e.id),disabled:me.length<=1,className:"p-2 text-red-400 disabled:opacity-30"},"\u{1F5D1}\uFE0F")))),me.length<10&&React.createElement("div",{className:"flex gap-2 mb-6"},React.createElement("input",{type:"text",value:Ze,onChange:e=>Ct(e.target.value),placeholder:"Nouveau cr\xE9neau (ex: 14h-16h)",className:"flex-1 px-4 py-2 bg-neutral-800 rounded-lg",onKeyDown:e=>e.key==="Enter"&&Ts()}),React.createElement("button",{onClick:Ts,disabled:!Ze.trim(),className:"px-4 py-2 bg-indigo-600 rounded-lg disabled:opacity-50"},"\u2795")),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>Ce("planning"),className:"flex-1 py-3 bg-neutral-700 rounded-lg"},"Annuler"),React.createElement("button",{onClick:Oa,className:"flex-1 py-3 bg-indigo-600 rounded-lg font-medium"},"\u{1F4BE} Sauvegarder"))))),Qs&&G&&React.createElement("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-[60]"},React.createElement("div",{className:"bg-neutral-900 rounded-2xl w-full max-w-md p-6 max-h-[90vh] overflow-y-auto"},React.createElement("h3",{className:"text-xl font-bold mb-2"},"\u{1F465} Affecter les b\xE9n\xE9voles"),React.createElement("p",{className:"text-neutral-400 text-sm mb-4"},(qs=w.find(e=>e.id===G.barId))==null?void 0:qs.nom," - ",(_s=D.find(e=>e.id===G.creneauId))==null?void 0:_s.label),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"bg-amber-900/20 p-4 rounded-xl border border-amber-700"},React.createElement("label",{className:"block text-sm font-bold text-amber-400 mb-2"},"\u{1F6D2} Vendeur"),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("input",{type:"text",placeholder:"Pr\xE9nom",value:G.vendeur.prenom,onChange:e=>re(t=>({...t,vendeur:{...t.vendeur,prenom:e.target.value}})),className:"px-3 py-2 bg-neutral-800 rounded-lg"}),React.createElement("input",{type:"text",placeholder:"Nom",value:G.vendeur.nom,onChange:e=>re(t=>({...t,vendeur:{...t.vendeur,nom:e.target.value}})),className:"px-3 py-2 bg-neutral-800 rounded-lg"}))),React.createElement("div",{className:"bg-blue-900/20 p-4 rounded-xl border border-blue-700"},React.createElement("label",{className:"block text-sm font-bold text-blue-400 mb-2"},"\u{1F37A} Serveur"),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("input",{type:"text",placeholder:"Pr\xE9nom",value:G.serveur.prenom,onChange:e=>re(t=>({...t,serveur:{...t.serveur,prenom:e.target.value}})),className:"px-3 py-2 bg-neutral-800 rounded-lg"}),React.createElement("input",{type:"text",placeholder:"Nom",value:G.serveur.nom,onChange:e=>re(t=>({...t,serveur:{...t.serveur,nom:e.target.value}})),className:"px-3 py-2 bg-neutral-800 rounded-lg"}))),React.createElement("div",{className:"bg-purple-900/20 p-4 rounded-xl border border-purple-700"},React.createElement("label",{className:"block text-sm font-bold text-purple-400 mb-2"},"\u{1F3C3} Runner"),React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("input",{type:"text",placeholder:"Pr\xE9nom",value:G.runner.prenom,onChange:e=>re(t=>({...t,runner:{...t.runner,prenom:e.target.value}})),className:"px-3 py-2 bg-neutral-800 rounded-lg"}),React.createElement("input",{type:"text",placeholder:"Nom",value:G.runner.nom,onChange:e=>re(t=>({...t,runner:{...t.runner,nom:e.target.value}})),className:"px-3 py-2 bg-neutral-800 rounded-lg"})))),React.createElement("div",{className:"flex gap-2 mt-6"},React.createElement("button",{onClick:()=>{wt(!1),re(null)},className:"flex-1 py-3 bg-neutral-700 rounded-lg"},"Annuler"),React.createElement("button",{onClick:Da,className:"flex-1 py-3 bg-indigo-600 rounded-lg font-medium"},"\u2713 Enregistrer")))),ia&&React.createElement("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center p-4 z-[60]"},React.createElement("div",{className:"bg-neutral-900 rounded-2xl w-full max-w-md overflow-hidden"},se===0&&React.createElement("div",{className:"p-6 text-center"},React.createElement("img",{src:"logo-hellfest.png",alt:"Hellfest",className:"w-20 h-20 mx-auto mb-4"}),React.createElement("h2",{className:"text-2xl font-bold text-green-400 mb-2"},"Bienvenue !"),React.createElement("p",{className:"text-neutral-300 mb-4"},"Application de gestion des f\xFBts pour les Bars Nomades du Hellfest 2026"),React.createElement("p",{className:"text-sm text-neutral-400"},"Suivez ce petit guide pour d\xE9couvrir les fonctionnalit\xE9s principales.")),se===1&&React.createElement("div",{className:"p-6"},React.createElement("div",{className:"text-4xl mb-4 text-center"},"\u2795"),React.createElement("h3",{className:"text-xl font-bold mb-3 text-center"},"Attribuer un f\xFBt"),React.createElement("div",{className:"bg-amber-900/30 p-4 rounded-xl mb-4"},React.createElement("p",{className:"text-sm text-neutral-300 mb-2"},"Utilisez le bouton ",React.createElement("span",{className:"bg-amber-600 px-2 py-1 rounded text-xs font-bold"},"\u2795 F\xFBt")," en bas de l'\xE9cran"),React.createElement("p",{className:"text-xs text-neutral-400"},"S\xE9lectionnez le bar qui re\xE7oit le f\xFBt (\u{1F37A} bi\xE8re ou \u{1F34E} cidre).")),React.createElement("div",{className:"bg-neutral-800 p-3 rounded-lg"},React.createElement("p",{className:"text-xs text-neutral-400"},"\u{1F4A1} Les couleurs indiquent la dur\xE9e :"),React.createElement("div",{className:"flex gap-2 mt-2 text-xs"},React.createElement("span",{className:"bg-neutral-700 px-2 py-1 rounded"},"<1h30"),React.createElement("span",{className:"bg-yellow-500 text-black px-2 py-1 rounded"},"1h30-3h"),React.createElement("span",{className:"bg-orange-500 px-2 py-1 rounded"},"3h-4h"),React.createElement("span",{className:"bg-red-600 px-2 py-1 rounded"},">4h")))),se===2&&React.createElement("div",{className:"p-6"},React.createElement("div",{className:"text-4xl mb-4 text-center"},"\u21A9\uFE0F"),React.createElement("h3",{className:"text-xl font-bold mb-3 text-center"},"Retourner un f\xFBt"),React.createElement("div",{className:"bg-blue-900/30 p-4 rounded-xl mb-4"},React.createElement("p",{className:"text-sm text-neutral-300 mb-2"},"Cliquez sur ",React.createElement("span",{className:"bg-black/30 px-2 py-1 rounded text-xs"},"\u21A9\uFE0F Retour")," \xE0 c\xF4t\xE9 du f\xFBt")),React.createElement("div",{className:"space-y-2 text-sm"},React.createElement("div",{className:"flex items-center gap-2 bg-neutral-800 p-2 rounded"},React.createElement("span",null,"\u{1F4E6}"),React.createElement("span",{className:"text-neutral-300"},"F\xFBt vide"),React.createElement("span",{className:"text-xs text-neutral-500 ml-auto"},"Le plus courant")),React.createElement("div",{className:"flex items-center gap-2 bg-neutral-800 p-2 rounded"},React.createElement("span",null,"\u{1F4A5}"),React.createElement("span",{className:"text-neutral-300"},"F\xFBt cass\xE9"),React.createElement("span",{className:"text-xs text-neutral-500 ml-auto"},"Probl\xE8me technique")),React.createElement("div",{className:"flex items-center gap-2 bg-neutral-800 p-2 rounded"},React.createElement("span",null,"\u267B\uFE0F"),React.createElement("span",{className:"text-neutral-300"},"Non termin\xE9"),React.createElement("span",{className:"text-xs text-neutral-500 ml-auto"},"Reprendre demain")),React.createElement("div",{className:"flex items-center gap-2 bg-green-900/30 p-2 rounded border border-green-600"},React.createElement("span",null,"\u{1F504}"),React.createElement("span",{className:"text-green-300"},"F\xFBt plein"),React.createElement("span",{className:"text-xs text-green-500 ml-auto"},"R\xE9int\xE8gre le stock")))),se===3&&React.createElement("div",{className:"p-6"},React.createElement("div",{className:"text-4xl mb-4 text-center"},"\u{1F4B0}"),React.createElement("h3",{className:"text-xl font-bold mb-3 text-center"},"Enregistrer les ventes"),React.createElement("div",{className:"bg-emerald-900/30 p-4 rounded-xl mb-4"},React.createElement("p",{className:"text-sm text-neutral-300 mb-2"},"Utilisez le bouton ",React.createElement("span",{className:"bg-emerald-600 px-2 py-1 rounded text-xs font-bold"},"\u{1F4B0} Vente")," en bas de l'\xE9cran")),React.createElement("div",{className:"bg-neutral-800 p-3 rounded-lg text-sm mb-3"},React.createElement("p",{className:"text-neutral-300 mb-2"},"Renseignez par cr\xE9neau :"),React.createElement("ul",{className:"text-neutral-400 text-xs space-y-1 ml-4"},React.createElement("li",null,"\u2022 Le montant total en \u20AC"),React.createElement("li",null,"\u2022 Nombre de pintes, pichets, gobelets"))),React.createElement("div",{className:"bg-orange-900/30 p-3 rounded-lg text-xs border border-orange-600/50"},React.createElement("p",{className:"text-orange-300 font-bold mb-1"},"\u26A0\uFE0F PAD d\xE9faillant ?"),React.createElement("p",{className:"text-orange-200"},"Cochez la case : le cr\xE9neau restera ouvert pour ajouter les donn\xE9es du PAD de remplacement."))),se===4&&React.createElement("div",{className:"p-6"},React.createElement("div",{className:"text-4xl mb-4 text-center"},"\u{1F5FA}\uFE0F"),React.createElement("h3",{className:"text-xl font-bold mb-3 text-center"},"Vue Plan du Festival"),React.createElement("div",{className:"bg-purple-900/30 p-4 rounded-xl mb-4"},React.createElement("p",{className:"text-sm text-neutral-300 mb-2"},"Utilisez le bouton ",React.createElement("span",{className:"bg-purple-600 px-2 py-1 rounded text-xs font-bold"},"\u{1F5FA}\uFE0F Plan")," en bas de l'\xE9cran")),React.createElement("div",{className:"bg-neutral-800 p-3 rounded-lg text-sm"},React.createElement("p",{className:"text-neutral-300 mb-2"},"Visualisez en temps r\xE9el :"),React.createElement("ul",{className:"text-neutral-400 text-xs space-y-1 ml-4"},React.createElement("li",null,"\u2022 Position des bars sur le plan"),React.createElement("li",null,"\u2022 \u{1F7E2} Vert = f\xFBts disponibles"),React.createElement("li",null,"\u2022 \u{1F7E1} Jaune = en service"),React.createElement("li",null,"\u2022 \u{1F534} Rouge = complet")),React.createElement("p",{className:"text-neutral-500 text-xs mt-2"},"\u{1F4A1} Super Admin peut positionner les bars"))),se===5&&React.createElement("div",{className:"p-6"},React.createElement("div",{className:"text-4xl mb-4 text-center"},"\u{1F510}"),React.createElement("h3",{className:"text-xl font-bold mb-3 text-center"},"Niveaux d'acc\xE8s"),React.createElement("div",{className:"space-y-3 text-sm"},React.createElement("div",{className:"bg-neutral-800 p-3 rounded-lg"},React.createElement("p",{className:"text-neutral-300 font-bold"},"\u{1F464} B\xE9n\xE9vole"),React.createElement("p",{className:"text-neutral-500 text-xs"},"Voir les f\xFBts, consulter le plan")),React.createElement("div",{className:"bg-red-900/30 p-3 rounded-lg border border-red-600/30"},React.createElement("p",{className:"text-red-300 font-bold"},"\u{1F510} Admin"),React.createElement("p",{className:"text-neutral-400 text-xs"},"+ Attribuer/retourner f\xFBts, saisir ventes, g\xE9rer b\xE9n\xE9voles, exports")),React.createElement("div",{className:"bg-amber-900/30 p-3 rounded-lg border border-amber-600/30"},React.createElement("p",{className:"text-amber-300 font-bold"},"\u{1F451} Super Admin"),React.createElement("p",{className:"text-neutral-400 text-xs"},"+ Cr\xE9er sessions, configurer bars, positionner sur le plan, RGPD")))),se===6&&React.createElement("div",{className:"p-6 text-center"},React.createElement("div",{className:"text-6xl mb-4"},"\u{1F389}"),React.createElement("h3",{className:"text-xl font-bold mb-3"},"C'est parti !"),React.createElement("p",{className:"text-neutral-300 mb-4"},"Vous \xEAtes pr\xEAt \xE0 utiliser l'application."),React.createElement("div",{className:"bg-neutral-800 p-3 rounded-lg text-sm text-left"},React.createElement("p",{className:"text-neutral-400 mb-2"},"\u{1F4A1} Astuces :"),React.createElement("ul",{className:"text-xs text-neutral-500 space-y-1"},React.createElement("li",null,"\u2022 Cliquez sur le code session pour voir les infos"),React.createElement("li",null,"\u2022 Installez l'app (PWA) pour un acc\xE8s rapide"),React.createElement("li",null,"\u2022 Le tutoriel est accessible dans les infos session")))),React.createElement("div",{className:"bg-neutral-800 px-6 py-4 flex items-center justify-between"},React.createElement("div",{className:"flex gap-1"},[0,1,2,3,4,5,6].map(e=>React.createElement("div",{key:e,className:`w-2 h-2 rounded-full ${se===e?"bg-red-500":"bg-neutral-600"}`}))),React.createElement("div",{className:"flex gap-2"},se>0&&React.createElement("button",{onClick:()=>nt(e=>e-1),className:"px-4 py-2 bg-neutral-700 rounded-lg text-sm"},"\u2190 Pr\xE9c\xE9dent"),se<6?React.createElement("button",{onClick:()=>nt(e=>e+1),className:"px-4 py-2 bg-red-600 rounded-lg text-sm font-medium"},"Suivant \u2192"):React.createElement("button",{onClick:()=>{at(!1),localStorage.setItem("gestionFuts_tutorielVu","true")},className:"px-4 py-2 bg-green-600 rounded-lg text-sm font-medium"},"\u2713 Commencer"))),React.createElement("button",{onClick:()=>{at(!1),localStorage.setItem("gestionFuts_tutorielVu","true")},className:"w-full py-2 text-neutral-500 text-sm hover:text-neutral-300"},"Passer le tutoriel"))),React.createElement("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-40"},React.createElement("div",{className:"flex gap-2 bg-neutral-900/95 backdrop-blur px-4 py-3 rounded-2xl shadow-lg border border-neutral-700"},React.createElement("button",{onClick:()=>Ut(!0),disabled:K,className:"px-4 py-3 bg-amber-600 hover:bg-amber-500 rounded-xl font-medium text-sm flex items-center gap-2 disabled:opacity-50"},"\u2795 F\xFBt"),React.createElement("button",{onClick:()=>Qe(!0),className:"px-4 py-3 bg-emerald-600 hover:bg-emerald-500 rounded-xl font-medium text-sm flex items-center gap-2"},"\u{1F4B0} Vente"),React.createElement("button",{onClick:()=>ws(!0),className:"px-4 py-3 bg-blue-600 hover:bg-blue-500 rounded-xl font-medium text-sm flex items-center gap-2"},"\u{1F5FA}\uFE0F Plan"))),da&&React.createElement("div",{className:"fixed inset-0 bg-black/95 flex flex-col z-50"},React.createElement("div",{className:"bg-blue-900 px-4 py-2 flex items-center justify-between shrink-0"},React.createElement("h3",{className:"text-lg font-bold"},"\u{1F5FA}\uFE0F Plan du Festival"),React.createElement("div",{className:"flex items-center gap-2"},_&&React.createElement("button",{onClick:()=>{if(Ht(!U),ot(null),!U){const e=w.find(t=>!rt[t.id]);lt(e?e.id:null)}},className:`px-2 py-1 rounded-lg text-xs ${U?"bg-orange-600":"bg-neutral-700"}`},U?"\u270F\uFE0F Placement ON":"\u2699\uFE0F Config"),React.createElement("button",{onClick:()=>{ws(!1),Ht(!1),ot(null)},className:"text-2xl"},"\u2715"))),U&&React.createElement("div",{className:"bg-orange-900/50 px-3 py-2 border-b border-orange-700 shrink-0"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs"},$e?React.createElement("p",null,"\u{1F446} Cliquez pour placer : ",React.createElement("span",{className:"font-bold text-orange-300"},(Js=w.find(e=>e.id===$e))==null?void 0:Js.nom)):React.createElement("p",{className:"text-green-400"},"\u2705 Tous positionn\xE9s !")),React.createElement("button",{onClick:Ea,className:"text-xs px-2 py-1 bg-red-600/50 rounded"},"\u{1F504} Reset")),React.createElement("div",{className:"flex flex-wrap gap-1 mt-2"},w.map(e=>{const t=!!rt[e.id],s=$e===e.id;return React.createElement("button",{key:e.id,onClick:()=>lt(e.id),className:`px-2 py-0.5 rounded text-xs ${s?"bg-orange-500 ring-2 ring-white":t?"bg-green-700":"bg-neutral-700"}`},e.type==="biere"?"\u{1F37A}":"\u{1F34E}"," ",e.nom," ",t&&"\u2713")}))),React.createElement("div",{className:"flex-1 overflow-auto p-2"},React.createElement("div",{className:"relative mx-auto bg-neutral-800 rounded-lg overflow-hidden",style:{aspectRatio:"1387 / 667",width:"100%",maxWidth:"1387px",minWidth:"600px"},onClick:e=>{(e.target===e.currentTarget||e.target.tagName==="IMG")&&(U||ot(null)),ka(e)}},React.createElement("img",{src:"plan-hellfest.jpg",alt:"Plan Hellfest",className:`absolute inset-0 w-full h-full object-cover ${U?"cursor-crosshair":""}`,draggable:!1}),w.map(e=>{const t=rt[e.id];if(!t)return null;const s=e.futs||[],a=s.length>=c.maxFutsParBar,r=s.length===0,n=a?"bg-red-500":r?"bg-green-500":"bg-yellow-500",o=a?"border-t-red-500":r?"border-t-green-500":"border-t-yellow-500",u=e.type==="biere",g=ua===e.id;return React.createElement("div",{key:e.id,className:"absolute transform -translate-x-1/2 -translate-y-full",style:{left:`${t.x}%`,top:`${t.y}%`,zIndex:g?50:10}},React.createElement("div",{className:`relative cursor-pointer transition-transform ${g?"scale-125":"hover:scale-110"} ${U?"animate-bounce":""}`,onClick:l=>{l.stopPropagation(),U||ot(g?null:e.id)}},React.createElement("div",{className:`w-7 h-7 sm:w-9 sm:h-9 ${n} rounded-full border-2 sm:border-3 border-white shadow-lg flex items-center justify-center text-sm sm:text-base`},u?"\u{1F37A}":"\u{1F34E}"),React.createElement("div",{className:"absolute -top-1 -right-1 w-4 h-4 sm:w-5 sm:h-5 bg-black border border-white sm:border-2 rounded-full flex items-center justify-center text-[10px] sm:text-xs font-bold"},s.length),React.createElement("div",{className:`absolute left-1/2 -bottom-1.5 sm:-bottom-2 transform -translate-x-1/2 w-0 h-0 border-l-[5px] sm:border-l-[7px] border-r-[5px] sm:border-r-[7px] border-t-[8px] sm:border-t-[10px] border-l-transparent border-r-transparent ${o}`})),g&&!U&&React.createElement("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-20"},React.createElement("div",{className:"bg-neutral-900 rounded-lg p-3 min-w-[140px] shadow-xl border border-neutral-500"},React.createElement("p",{className:"font-bold text-sm mb-1"},u?"\u{1F37A}":"\u{1F34E}"," ",e.nom),React.createElement("div",{className:"flex items-center gap-1 mb-2"},Array.from({length:c.maxFutsParBar}).map((l,f)=>React.createElement("span",{key:f,className:`text-xs ${f<s.length?"":"opacity-30"}`},"\u{1F6E2}\uFE0F")),React.createElement("span",{className:`text-xs font-bold ml-1 ${a?"text-red-400":r?"text-green-400":"text-yellow-400"}`},s.length,"/",c.maxFutsParBar)),s.length>0&&React.createElement("div",{className:"text-xs text-neutral-400 space-y-0.5"},s.map((l,f)=>{const i=l.dateAttribution?Fs(l.dateAttribution):"",x=l.dateAttribution?ma(l.dateAttribution):"";return React.createElement("div",{key:f,className:`px-1 rounded ${i}`},"F\xFBt ",f+1," ",x&&`\u2022 ${x}`)})),React.createElement("p",{className:`text-xs mt-2 font-medium ${a?"text-red-400":r?"text-green-400":"text-yellow-400"}`},a?"\u{1F534} COMPLET":r?"\u{1F7E2} DISPO":"\u{1F7E1} EN SERVICE")),React.createElement("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-[8px] border-r-[8px] border-t-[8px] border-l-transparent border-r-transparent border-t-neutral-900"})),U&&React.createElement("button",{onClick:l=>{l.stopPropagation(),Aa(e.id)},className:"absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs bg-red-600 hover:bg-red-500 rounded px-1"},"\u2715"))}))),React.createElement("div",{className:"bg-neutral-800 px-4 py-2 flex items-center justify-between text-xs shrink-0"},React.createElement("div",{className:"flex items-center gap-4"},React.createElement("span",{className:"flex items-center gap-1"},React.createElement("span",{className:"w-2.5 h-2.5 bg-green-500 rounded-full"})," Dispo"),React.createElement("span",{className:"flex items-center gap-1"},React.createElement("span",{className:"w-2.5 h-2.5 bg-yellow-500 rounded-full"})," En service"),React.createElement("span",{className:"flex items-center gap-1"},React.createElement("span",{className:"w-2.5 h-2.5 bg-red-500 rounded-full"})," Complet")),React.createElement("span",{className:"text-neutral-500"},"\u2194\uFE0F Scroll horizontal"))),oa&&React.createElement("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50"},React.createElement("div",{className:"bg-neutral-900 rounded-2xl w-full max-w-md p-6"},q?React.createElement(React.Fragment,null,React.createElement("div",{className:"text-center"},React.createElement("div",{className:"text-5xl mb-4"},q.barType==="biere"?"\u{1F37A}":"\u{1F34E}"),React.createElement("h3",{className:"text-xl font-bold mb-2"},"Confirmer l'attribution"),React.createElement("p",{className:"text-2xl font-black text-white mb-4"},q.barNom)),React.createElement("div",{className:"bg-neutral-800 rounded-xl p-4 mb-4"},React.createElement("div",{className:"flex items-center justify-between mb-3"},React.createElement("span",{className:"text-neutral-400"},"Actuellement :"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"flex gap-1"},Array.from({length:q.maxFuts}).map((e,t)=>React.createElement("span",{key:t,className:`text-xl ${t<q.currentFuts?"":"opacity-30"}`},"\u{1F6E2}\uFE0F"))),React.createElement("span",{className:`text-2xl font-black ${q.currentFuts>0?"text-yellow-400":"text-green-400"}`},q.currentFuts))),React.createElement("div",{className:"flex items-center justify-center text-3xl text-green-400 my-2"},"\u2193 +1"),React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",{className:"text-neutral-400"},"Apr\xE8s :"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"flex gap-1"},Array.from({length:q.maxFuts}).map((e,t)=>React.createElement("span",{key:t,className:`text-xl ${t<q.currentFuts+1?"":"opacity-30"}`},"\u{1F6E2}\uFE0F"))),React.createElement("span",{className:`text-2xl font-black ${q.currentFuts+1>=q.maxFuts?"text-red-400":"text-yellow-400"}`},q.currentFuts+1))),q.currentFuts+1>=q.maxFuts&&React.createElement("div",{className:"mt-3 text-center"},React.createElement("span",{className:"text-red-400 text-sm font-bold bg-red-900/50 px-3 py-1 rounded-full"},"\u26A0\uFE0F Ce bar sera COMPLET"))),React.createElement("div",{className:"flex gap-3"},React.createElement("button",{onClick:()=>st(null),className:"flex-1 py-4 bg-neutral-700 hover:bg-neutral-600 rounded-xl font-medium text-lg"},"\u2190 Retour"),React.createElement("button",{onClick:()=>{Ca(q.barId),st(null),Ut(!1)},disabled:K,className:"flex-1 py-4 bg-green-600 hover:bg-green-500 rounded-xl font-bold text-lg disabled:opacity-50"},K?"\u23F3":"\u2713 CONFIRMER"))):React.createElement(React.Fragment,null,React.createElement("h3",{className:"text-xl font-bold mb-4"},"\u2795 Attribuer un f\xFBt"),React.createElement("p",{className:"text-neutral-400 text-sm mb-4"},"S\xE9lectionnez le bar :"),React.createElement("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto"},w.map(e=>{const t=e.type==="biere",s=e.futs||[],a=s.length<c.maxFutsParBar&&(t?oe>0:ie>0),r=s.length>=c.maxFutsParBar;return React.createElement("button",{key:e.id,onClick:()=>st({barId:e.id,barNom:e.nom,barType:e.type,currentFuts:s.length,maxFuts:c.maxFutsParBar}),disabled:!a||K,className:`w-full p-4 rounded-xl flex items-center justify-between transition-all ${a&&!K?t?"bg-emerald-900/50 hover:bg-emerald-900 hover:scale-[1.02]":"bg-teal-900/50 hover:bg-teal-900 hover:scale-[1.02]":"bg-neutral-800 opacity-50 cursor-not-allowed"}`},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("span",{className:"text-2xl"},t?"\u{1F37A}":"\u{1F34E}"),React.createElement("div",{className:"text-left"},React.createElement("p",{className:"font-medium"},e.nom),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("div",{className:"flex gap-0.5"},Array.from({length:c.maxFutsParBar}).map((n,o)=>React.createElement("span",{key:o,className:`text-sm ${o<s.length?"":"opacity-30"}`},"\u{1F6E2}\uFE0F"))),React.createElement("span",{className:`text-sm font-bold ${r?"text-red-400":s.length>0?"text-yellow-400":"text-green-400"}`},s.length,"/",c.maxFutsParBar)))),r?React.createElement("span",{className:"text-red-400 text-xs font-bold"},"COMPLET"):a?React.createElement("span",{className:"text-green-400 text-xl"},"\u2192"):React.createElement("span",{className:"text-red-400 text-xs"},"Stock vide"))})),React.createElement("button",{onClick:()=>{Ut(!1),st(null)},className:"w-full py-3 bg-neutral-700 rounded-lg mt-4"},"Fermer"))))):React.createElement(Wa,{onJoinSession:Na})};ReactDOM.createRoot(document.getElementById("root")).render(React.createElement(Ya,null));})();

</script>
</body>
</html>
